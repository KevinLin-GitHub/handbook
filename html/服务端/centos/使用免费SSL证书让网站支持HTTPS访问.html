<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>handbook</title>
    <link rel="stylesheet" type="text/css" href="../../../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            <img src="../../../idoc-logo.svg">
        
    </div>
<ul><li><a href="../../../index.html">正则完整篇</a></li><li><a href="#"><span></span>前端</a><ul><li><a href="#"><span></span>Javascript</a><ul><li><a href="#"><span></span>React</a><ul><li><a href="../../../html/前端/Javascript/React/10、react结合redux实战篇.html">10、react结合redux实战篇</a></li><li><a href="../../../html/前端/Javascript/React/11、React Router 4.html">11、React Router 4</a></li><li><a href="../../../html/前端/Javascript/React/12、Immutable学习记录.html">12、Immutable学习记录</a></li><li><a href="../../../html/前端/Javascript/React/1、环境的搭建.html">1、环境的搭建</a></li><li><a href="../../../html/前端/Javascript/React/2、JSX语法及非DOM操作属性.html">2、JSX语法及非DOM操作属性</a></li><li><a href="../../../html/前端/Javascript/React/3、组件的生命周期以及属性状态.html">3、组件的生命周期以及属性状态</a></li><li><a href="../../../html/前端/Javascript/React/4、事件.html">4、事件</a></li><li><a href="../../../html/前端/Javascript/React/5、组件的协同及（不）可控组件.html">5、组件的协同及（不）可控组件</a></li><li><a href="../../../html/前端/Javascript/React/6、action、store、reducer分析.html">6、action、store、reducer分析</a></li><li><a href="../../../html/前端/Javascript/React/7、异步Action及操作.html">7、异步Action及操作</a></li><li><a href="../../../html/前端/Javascript/React/8、浅析中间件.html">8、浅析中间件</a></li><li><a href="../../../html/前端/Javascript/React/9、源码分析.html">9、源码分析</a></li></ul></li><li><a href="#"><span></span>React Native</a><ul><li><a href="../../../html/前端/Javascript/React Native/React-native Android环境搭建.html">React-native Android环境搭建</a></li></ul></li><li><a href="../../../html/前端/Javascript/思维导图.html">思维导图</a></li><li><a href="../../../html/前端/Javascript/正则完整篇.html">正则完整篇</a></li><li><a href="../../../html/前端/Javascript/正则表达式.html">正则表达式</a></li><li><a href="../../../html/前端/Javascript/轻量高效的开源JavaScript插件和库.html">轻量高效的开源JavaScript插件和库</a></li></ul></li></ul></li><li><a href="#"><span></span>服务端</a><ul><li><a href="../../../html/服务端/docker.html">docker</a></li><li><a href="#"><span></span>node</a><ul><li><a href="#"><span></span>框架</a><ul><li><a href="../../../html/服务端/node/框架/express详细使用.html">express详细使用</a></li><li><a href="../../../html/服务端/node/框架/koa基本用法.html">koa基本用法</a></li></ul></li></ul></li><li><a href="#"><span></span>shell</a><ul><li><a href="../../../html/服务端/shell/shell正则.html">shell正则</a></li><li><a href="../../../html/服务端/shell/shell脚本入门.html">shell脚本入门</a></li></ul></li><li><a href="#"><span></span>数据库</a><ul><li><a href="../../../html/服务端/数据库/Redis.html">Redis</a></li><li><a href="#"><span></span>mysql</a><ul><li><a href="../../../html/服务端/数据库/mysql/Mysql入门.html">Mysql入门</a></li><li><a href="../../../html/服务端/数据库/mysql/awesome-mysql.html">awesome-mysql</a></li><li><a href="#"><span></span>第一章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第一章/1.1.html">1.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.2.html">1.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.3.html">1.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.4.html">1.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.html">1</a></li></ul></li><li><a href="#"><span></span>第三章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第三章/3.1.html">3.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.2.html">3.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.3.html">3.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.4.html">3.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.5.html">3.5</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.html">3</a></li></ul></li><li><a href="#"><span></span>第二章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第二章/2.1.html">2.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.2.html">2.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.3.html">2.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.4.html">2.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.5.html">2.5</a></li></ul></li><li><a href="#"><span></span>第四章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第四章/4.1.html">4.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第四章/4.2.html">4.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第四章/4.3.html">4.3</a></li></ul></li></ul></li></ul></li><li><a href="../../../html/服务端/Nginx.html">Nginx</a></li><li><a href="#"><span></span>centos</a><ul><li><a href="../../../html/服务端/centos/CentOS7安装KVM虚拟机详解.html">CentOS7安装KVM虚拟机详解</a></li><li><a href="../../../html/服务端/centos/CentOS7安装维护Gitlab.html">CentOS7安装维护Gitlab</a></li><li><a href="../../../html/服务端/centos/CentOS7安装配置vsftp搭建FTP.html">CentOS7安装配置vsftp搭建FTP</a></li><li><a href="../../../html/服务端/centos/CentOS7更换yum软件镜像源.html">CentOS7更换yum软件镜像源</a></li><li><a href="../../../html/服务端/centos/CentOS7网络配置.html">CentOS7网络配置</a></li><li><a href="../../../html/服务端/centos/Centos7安装编译Node.html">Centos7安装编译Node</a></li><li><a href="../../../html/服务端/centos/Centos常用命令.html">Centos常用命令</a></li><li><a href="../../../html/服务端/centos/Elasticsearch安装维护.html">Elasticsearch安装维护</a></li><li><a href="../../../html/服务端/centos/Golang安装.html">Golang安装</a></li><li><a href="../../../html/服务端/centos/Linux添加、删除用户和用户组.html">Linux添加、删除用户和用户组</a></li><li><a href="../../../html/服务端/centos/Mac下制作CentOS7启动盘.html">Mac下制作CentOS7启动盘</a></li><li><a href="../../../html/服务端/centos/Mac使用NFS连接CentOS上的共享文件夹.html">Mac使用NFS连接CentOS上的共享文件夹</a></li><li><a href="../../../html/服务端/centos/Nginx 安装.html">Nginx 安装</a></li><li><a href="../../../html/服务端/centos/Python2升级到Python3.html">Python2升级到Python3</a></li><li><a href="../../../html/服务端/centos/Rocket.Chat.html">Rocket.Chat</a></li><li><a href="../../../html/服务端/centos/Ruby安装.html">Ruby安装</a></li><li><a href="../../../html/服务端/centos/chmod.html">chmod</a></li><li><a href="../../../html/服务端/centos/samba.html">samba</a></li><li class="active"><a href="../../../html/服务端/centos/使用免费SSL证书让网站支持HTTPS访问.html">使用免费SSL证书让网站支持HTTPS访问</a></li><li><a href="../../../html/服务端/centos/修改ssh端口号的方法.html">修改ssh端口号的方法</a></li><li><a href="../../../html/服务端/centos/在5分钟内搭建企业内部私有npm仓库.html">在5分钟内搭建企业内部私有npm仓库</a></li><li><a href="../../../html/服务端/centos/安装Java.html">安装Java</a></li><li><a href="../../../html/服务端/centos/安装openstack.html">安装openstack</a></li><li><a href="../../../html/服务端/centos/安装pip工具.html">安装pip工具</a></li><li><a href="../../../html/服务端/centos/安装使用svn.html">安装使用svn</a></li><li><a href="../../../html/服务端/centos/尝试在CentOS7.2上编译安装Swift.html">尝试在CentOS7.2上编译安装Swift</a></li><li><a href="../../../html/服务端/centos/常用基础命令.html">常用基础命令</a></li><li><a href="../../../html/服务端/centos/搭建Shadowsocks服务器.html">搭建Shadowsocks服务器</a></li><li><a href="../../../html/服务端/centos/管理远程会话screen工具.html">管理远程会话screen工具</a></li><li><a href="../../../html/服务端/centos/部署Seafile搭建自己的网盘.html">部署Seafile搭建自己的网盘</a></li></ul></li></ul></li><li><a href="#"><span></span>工具箱</a><ul><li><a href="../../../html/工具箱/Git常用命令.html">Git常用命令</a></li><li><a href="../../../html/工具箱/vim.html">vim</a></li><li><a href="#"><span></span>代码片段</a><ul><li><a href="../../../html/工具箱/代码片段/100个JavaScript代码片段.html">100个JavaScript代码片段</a></li></ul></li><li><a href="#"><span></span>服务构建</a><ul><li><a href="../../../html/工具箱/服务构建/持续集成服务 Travis CI.html">持续集成服务 Travis CI</a></li></ul></li></ul></li><li><a href="#"><span></span>其他</a><ul><li><a href="../../../html/其他/HTTP状态码.html">HTTP状态码</a></li><li><a href="../../../html/其他/通过代理工具提高Github Clone速度.html">通过代理工具提高Github Clone速度</a></li></ul></li><li><a href="../../../html/收藏夹.html">收藏夹</a></li></ul></div>


<div class="forkgithub"><a target="_blank" href="https://github.com/poetries/handbook"></a></div>

<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t0使用免费SSL证书让网站支持HTTPS访问">使用免费SSL证书让网站支持HTTPS访问</a></li><li><a href="#t1安装 EPEL 仓库">安装 EPEL 仓库</a></li><li><a href="#t2安装签发证书工具">安装签发证书工具</a></li><li><a href="#t3申请证书">申请证书</a><ul><li><a href="#t4报nginx命令不存在错误">报nginx命令不存在错误</a></li><li><a href="#t5报nginx配置文件目录不对错误">报nginx配置文件目录不对错误</a></li><li><a href="#t6正式申请申请证书">正式申请申请证书</a></li><li><a href="#t7配置nginx">配置nginx</a></li></ul></li><li><a href="#t8参考阅读">参考阅读</a></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="t0&#x4F7F;&#x7528;&#x514D;&#x8D39;SSL&#x8BC1;&#x4E66;&#x8BA9;&#x7F51;&#x7AD9;&#x652F;&#x6301;HTTPS&#x8BBF;&#x95EE;">&#x4F7F;&#x7528;&#x514D;&#x8D39;SSL&#x8BC1;&#x4E66;&#x8BA9;&#x7F51;&#x7AD9;&#x652F;&#x6301;HTTPS&#x8BBF;&#x95EE; <a href="#t0&#x4F7F;&#x7528;&#x514D;&#x8D39;SSL&#x8BC1;&#x4E66;&#x8BA9;&#x7F51;&#x7AD9;&#x652F;&#x6301;HTTPS&#x8BBF;&#x95EE;"> # </a></h2>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x670D;&#x52A1;&#x5668;&#x662F;&#x5728;&#x516C;&#x53F8;&#x5185;&#x90E8;&#xFF0C;&#x7528;&#x8054;&#x901A;&#x9001;&#x7684;ip&#xFF0C;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x5668;&#x9690;&#x5C04;&#x4F7F;&#x5F97;&#x5916;&#x7F51;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;&#x4E86;&#x5F88;&#x591A;&#x5DE5;&#x5177;&#xFF0C;&#x6BD4;&#x5982;Gitlab&#xFF0C;&#x804A;&#x5929;&#x5DE5;&#x5177;&#xFF0C;&#x7F51;&#x76D8;&#x7B49;&#xFF0C;&#x8BBF;&#x95EE;&#x90FD;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x6CA1;&#x6709;&#x5907;&#x6848;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x5E26;&#x4E0A;&#x7AEF;&#x53E3;&#x53F7;&#x8BBF;&#x95EE;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x636E;&#x8BF4;80&#x7AEF;&#x53E3;&#x88AB;&#x5C01;&#x4E86;&#xFF0C;&#x5047;&#x8BBE;&#x6709;&#x4E86;https&#x5C31;&#x53EF;&#x4EE5;&#x9ED8;&#x8BA4;443&#x7AEF;&#x53E3;&#xFF0C;&#x5C31;&#x4E0D;&#x7528;&#x5E26;&#x7AEF;&#x53E3;&#x53F7;&#x4E86;&#xFF0C;&#x901A;&#x8FC7;https&#x8BBF;&#x95EE;&#x9ED8;&#x8BA4;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x7ED9;&#x4F60;&#x5E26;&#x4E0A;443&#x7AEF;&#x53E3;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x4F7F;&#x7528;<a href="https://www.sslforfree.com/">Let&apos;s Encrypt</a>&#x63D0;&#x4F9B;&#x7684;SSL&#x8BC1;&#x4E66;&#xFF0C;&#x8BB0;&#x5F55;&#x914D;&#x7F6E;SSL&#x7684;&#x5B89;&#x88C5;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x3002;</p>
<h2 id="t1&#x5B89;&#x88C5; EPEL &#x4ED3;&#x5E93;">&#x5B89;&#x88C5; EPEL &#x4ED3;&#x5E93; <a href="#t1&#x5B89;&#x88C5; EPEL &#x4ED3;&#x5E93;"> # </a></h2>
<p>&#x9996;&#x5148;&#x8981;&#x5B89;&#x88C5; <code>Let&apos;s Encrypt</code> &#x8BC1;&#x4E66;&#x7528;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x5728;CentOS &#x7684; EPEL &#x4ED3;&#x5E93;&#x91CC;&#x627E;&#x5230;&#x5B83;&#xFF0C;&#x5728;&#x627E;&#x5230;&#x5B83;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5B58;&#x5728; <code>EPEL</code> &#x6E90;:</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x8FDB;&#x5165;&#x76EE;&#x5F55;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5B58;&#x5728; EPEL &#x6E90;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x6587;&#x4EF6;&#x540D;&#x79F0; epel.repo</span>
<span class="hljs-built_in">cd</span> /etc/yum.repos.d/
</code></pre>
<p>&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B89;&#x88C5;</p>
<pre><code class="lang-bash">sudo yum install epel-release -y
</code></pre>
<h2 id="t2&#x5B89;&#x88C5;&#x7B7E;&#x53D1;&#x8BC1;&#x4E66;&#x5DE5;&#x5177;">&#x5B89;&#x88C5;&#x7B7E;&#x53D1;&#x8BC1;&#x4E66;&#x5DE5;&#x5177; <a href="#t2&#x5B89;&#x88C5;&#x7B7E;&#x53D1;&#x8BC1;&#x4E66;&#x5DE5;&#x5177;"> # </a></h2>
<pre><code class="lang-bash">sudo yum install certbot-nginx -y
</code></pre>
<h2 id="t3&#x7533;&#x8BF7;&#x8BC1;&#x4E66;">&#x7533;&#x8BF7;&#x8BC1;&#x4E66; <a href="#t3&#x7533;&#x8BF7;&#x8BC1;&#x4E66;"> # </a></h2>
<h4 id="t4&#x62A5;nginx&#x547D;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;&#x9519;&#x8BEF;">&#x62A5;nginx&#x547D;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;&#x9519;&#x8BEF; <a href="#t4&#x62A5;nginx&#x547D;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;&#x9519;&#x8BEF;"> # </a></h4>
<pre><code class="lang-bash">sudo certbot --nginx
<span class="hljs-comment"># Saving debug log to /var/log/letsencrypt/letsencrypt.log</span>
<span class="hljs-comment"># The nginx plugin is not working; there may be problems with your existing configuration.</span>
<span class="hljs-comment"># The error was: NoInstallationError()</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4F60;&#x62A5;&#x4E0A;&#x9762;&#x9519;&#x8BEF;&#x8FD0;&#x884C;&#x4E0B;&#x9762;&#xFF0C;&#x547D;&#x4EE4;&#x89E3;&#x51B3;&#x95EE;&#x9898;</span>
<span class="hljs-built_in">which</span> nginx <span class="hljs-comment"># &#x67E5;&#x770B;&#x76EE;&#x5F55;</span>
<span class="hljs-comment">#&#x8F93;&#x51FA; /usr/local/nginx/sbin/nginx</span>
yum info nginx
</code></pre>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</p>
<pre><code class="lang-bash">ln -s /usr/<span class="hljs-built_in">local</span>/nginx/sbin/nginx /usr/bin/nginx
ln -s /usr/<span class="hljs-built_in">local</span>/nginx/conf/ /etc/nginx
</code></pre>
<h4 id="t5&#x62A5;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0D;&#x5BF9;&#x9519;&#x8BEF;">&#x62A5;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0D;&#x5BF9;&#x9519;&#x8BEF; <a href="#t5&#x62A5;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0D;&#x5BF9;&#x9519;&#x8BEF;"> # </a></h4>
<pre><code class="lang-bash">sudo certbot --nginx
<span class="hljs-comment"># Saving debug log to /var/log/letsencrypt/letsencrypt.log</span>
<span class="hljs-comment"># Error while running nginx -c /etc/nginx/nginx.conf -t.</span>

<span class="hljs-comment"># nginx: [emerg] open() &quot;/etc/nginx/nginx.conf&quot; failed (2: No such file or directory)</span>
<span class="hljs-comment"># nginx: configuration file /etc/nginx/nginx.conf test failed</span>

<span class="hljs-comment"># The nginx plugin is not working; there may be problems with your existing configuration.</span>
<span class="hljs-comment"># The error was: MisconfigurationError(&apos;Error while running nginx -c /etc/nginx/nginx.conf -t.\n\nnginx: [emerg] open() &quot;/etc/nginx/nginx.conf&quot; failed (2: No such file or directory)\nnginx: configuration file /etc/nginx/nginx.conf test failed\n&apos;,)</span>
</code></pre>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8BA9;<code>certbot</code>&#x8BA4;&#x4E3A;&#x4F60;&#x7684;&#xFF0C;&#x4F60;&#x7684;&#x914D;&#x7F6E;&#x5B58;&#x5728;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;SSL&#x914D;&#x7F6E;&#x5199;&#x5165;&#x4F60;&#x7684;nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x62F7;&#x8D1D;&#x914D;&#x7F6E;&#x5230;&#x4F60;&#x7684;&#x9ED8;&#x8BA4; nginx &#x914D;&#x7F6E;&#x4E2D;&#x3002;&#x54C8;&#x54C8;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF; nginx &#x542F;&#x52A8;&#x4E0D;&#x7528;&#x6307;&#x5B9A;&#x914D;&#x7F6E;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x770B;&#x5230; <code>certbot</code> &#x5DE5;&#x5177;&#x63D0;&#x4F9B;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x6682;&#x65F6;&#x6211;&#x5C31;&#x8FD9;&#x4E48;&#x89E3;&#x51B3;&#x5427;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># nginx &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0D; /etc/nginx/ &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;</span>
<span class="hljs-comment"># &#x9700;&#x8981;&#x62F7;&#x8D1D;/usr/local/nginx/conf&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x5168;&#x90E8;&#x6587;&#x4EF6;</span>
<span class="hljs-comment"># &#x590D;&#x5236;&#x5230;/etc/nginx/&#x76EE;&#x5F55;&#x4E0B;</span>
cp -r /usr/<span class="hljs-built_in">local</span>/nginx/conf/* /etc/nginx/

<span class="hljs-comment"># &#x7F16;&#x8F91;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x5C06;&#x6240;&#x6709;&#x76EE;&#x5F55;&#x6362;&#x6210;/etc/nginx/</span>
vim /lib/systemd/system/nginx.service
cp /lib/systemd/system/nginx.service{,.bak}

<span class="hljs-comment"># &#x6D4B;&#x8BD5;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;</span>
nginx -t -c /etc/nginx/nginx.conf
</code></pre>
<p>&#x6B63;&#x786E;&#x4E4B;&#x540E;&#x5C06;<code>nginx</code>&#x4E2D;&#x7684; <code>SSL</code> &#x914D;&#x7F6E;&#x590D;&#x5236;&#x5230;&#x4F60;&#x7684;&#x539F;&#x6765;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x5728;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x914D;&#x7F6E;<code>/usr/local/nginx/conf/</code>&#x3002;&#x4F1A;&#x5728;&#x914D;&#x7F6E;&#x4E2D;&#x751F;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x590D;&#x5236;&#x8FD9;&#x4E2A;&#x3002;</p>
<pre><code class="lang-nginx">{
  ssl_certificate /etc/letsencrypt/live/chat.wangchujiang.com/fullchain.pem; # managed by Certbot
  ssl_certificate_key /etc/letsencrypt/live/chat.wangchujiang.com/privkey.pem; # managed by Certbot
}
</code></pre>
<h4 id="t6&#x6B63;&#x5F0F;&#x7533;&#x8BF7;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;">&#x6B63;&#x5F0F;&#x7533;&#x8BF7;&#x7533;&#x8BF7;&#x8BC1;&#x4E66; <a href="#t6&#x6B63;&#x5F0F;&#x7533;&#x8BF7;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;"> # </a></h4>
<p>&#x9996;&#x5148;&#x8FD0;&#x884C;&#x8BC1;&#x4E66;&#x751F;&#x6210;&#x547D;&#x4EE4;&#xFF0C;&#x9009;&#x62E9;&#x4F60;&#x8981;&#x914D;&#x7F6E;<code>SSL</code>&#x8BC1;&#x4E66;&#x7684;&#x7F51;&#x7AD9;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x57FA;&#x4E8E;&#x4F60;&#x7F51;&#x7AD9;&#x5DF2;&#x7ECF;&#x5728;<code>nginx</code>&#x4E2D;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<pre><code class="lang-bash">sudo certbot --nginx certonly
<span class="hljs-comment"># Saving debug log to /var/log/letsencrypt/letsencrypt.log</span>
<span class="hljs-comment"># Plugins selected: Authenticator nginx, Installer nginx</span>
<span class="hljs-comment"># Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># Which names would you like to activate HTTPS for?</span>
<span class="hljs-comment"># -------------------------------------------------------------------------------</span>
<span class="hljs-comment"># 1: chat.wangchujiang.com</span>
<span class="hljs-comment"># 2: g.wangchujiang.com</span>
<span class="hljs-comment"># 3: pan.wangchujiang.com</span>
<span class="hljs-comment"># -------------------------------------------------------------------------------</span>
<span class="hljs-comment"># Select the appropriate numbers separated by commas and/or spaces, or leave input</span>
<span class="hljs-comment"># blank to select all options shown (Enter &apos;c&apos; to cancel): 2</span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x9009;&#x62E9;&#x4E86;<code>g.wangchujiang.com</code>&#x751F;&#x6210;&#x8BC1;&#x4E66;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x9A8C;&#x8BC1;&#x8FC7;&#x7A0B;&#xFF0C;&#x6DFB;&#x52A0; <code>certonly</code>&#x53C2;&#x6570;&#x8868;&#x793A;&#x53EA;&#x751F;&#x6210;&#x8BC1;&#x4E66;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Obtaining a new certificate</span>
<span class="hljs-comment"># Performing the following challenges:</span>
<span class="hljs-comment"># tls-sni-01 challenge for g.wangchujiang.com</span>
<span class="hljs-comment"># Waiting for verification...</span>
<span class="hljs-comment"># Cleaning up challenges</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># IMPORTANT NOTES:</span>
<span class="hljs-comment">#  - Congratulations! Your certificate and chain have been saved at:</span>
<span class="hljs-comment">#    /etc/letsencrypt/live/g.wangchujiang.com/fullchain.pem</span>
<span class="hljs-comment">#    Your key file has been saved at:</span>
<span class="hljs-comment">#    /etc/letsencrypt/live/g.wangchujiang.com/privkey.pem</span>
<span class="hljs-comment">#    Your cert will expire on 2018-03-13. To obtain a new or tweaked</span>
<span class="hljs-comment">#    version of this certificate in the future, simply run certbot</span>
<span class="hljs-comment">#    again. To non-interactively renew *all* of your certificates, run</span>
<span class="hljs-comment">#    &quot;certbot renew&quot;</span>
<span class="hljs-comment">#  - If you like Certbot, please consider supporting our work by:</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment">#    Donating to ISRG / Let&apos;s Encrypt:   https://letsencrypt.org/donate</span>
<span class="hljs-comment">#    Donating to EFF:                    https://eff.org/donate-le</span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x751F;&#x6210;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230; nginx &#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E0B;&#x5B8C;&#x4E8B;&#x513F;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x7AEF;nginx&#x7684;&#x914D;&#x7F6E;&#x5B9E;&#x4F8B;&#x3002;</p>
<h4 id="t7&#x914D;&#x7F6E;nginx">&#x914D;&#x7F6E;nginx <a href="#t7&#x914D;&#x7F6E;nginx"> # </a></h4>
<pre><code class="lang-nginx"><span class="hljs-comment"># http &#x91CD;&#x5B9A;&#x5411;&#x5230; https</span>
<span class="hljs-section">server</span> {
    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;
    <span class="hljs-attribute">server_name</span>  g.wangchujiang.com;
    <span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^</span> https://<span class="hljs-variable">$http_host</span><span class="hljs-variable">$request_uri</span>? <span class="hljs-literal">permanent</span>;
    <span class="hljs-comment"># Enables or disables emitting nginx version on error pages and in the &quot;Server&quot; response header field.</span>
    <span class="hljs-attribute">server_tokens</span> <span class="hljs-literal">off</span>;
}
<span class="hljs-comment"># https &#x7684;&#x914D;&#x7F6E;</span>
<span class="hljs-section">server</span> {
  <span class="hljs-attribute">listen</span>       <span class="hljs-number">443</span> ssl;
  <span class="hljs-attribute">server_name</span>  g.wangchujiang.com;

  <span class="hljs-attribute">ssl_certificate</span> /etc/letsencrypt/live/g.wangchujiang.com/fullchain.pem;
  <span class="hljs-attribute">ssl_certificate_key</span> /etc/letsencrypt/live/g.wangchujiang.com/privkey.pem;
  <span class="hljs-comment"># &#x7981;&#x6B62;&#x5728;header&#x4E2D;&#x51FA;&#x73B0;&#x670D;&#x52A1;&#x5668;&#x7248;&#x672C;&#xFF0C;&#x9632;&#x6B62;&#x9ED1;&#x5BA2;&#x5229;&#x7528;&#x7248;&#x672C;&#x6F0F;&#x6D1E;&#x653B;&#x51FB;</span>
  <span class="hljs-attribute">server_tokens</span> <span class="hljs-literal">off</span>;
  <span class="hljs-comment"># &#x8BBE;&#x7F6E;ssl/tls&#x4F1A;&#x8BDD;&#x7F13;&#x5B58;&#x7684;&#x7C7B;&#x578B;&#x548C;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4E00;&#x822C;&#x662F;shared&#xFF0C;buildin&#x53EF;&#x80FD;&#x4F1A;&#x53C2;&#x6570;&#x5185;&#x5B58;&#x788E;&#x7247;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;none&#xFF0C;&#x548C;off&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x505C;&#x7528;&#x7F13;&#x5B58;&#x3002;&#x5982;shared:SSL:10m&#x8868;&#x793A;&#x6211;&#x6240;&#x6709;&#x7684;nginx&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x5171;&#x4EAB;ssl&#x4F1A;&#x8BDD;&#x7F13;&#x5B58;&#xFF0C;&#x5B98;&#x7F51;&#x4ECB;&#x7ECD;&#x8BF4;1M&#x53EF;&#x4EE5;&#x5B58;&#x653E;&#x7EA6;4000&#x4E2A;sessions&#x3002; </span>
  <span class="hljs-attribute">ssl_session_cache</span>    shared:SSL:<span class="hljs-number">1m</span>; 

  <span class="hljs-comment"># &#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#x4F1A;&#x8BDD;&#x7F13;&#x5B58;&#x4E2D;ssl&#x53C2;&#x6570;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x5185;&#x7F51;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;5&#x5206;&#x949F;&#x592A;&#x77ED;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x6210;30m&#x5373;30&#x5206;&#x949F;&#x751A;&#x81F3;4h&#x3002;</span>
  <span class="hljs-attribute">ssl_session_timeout</span>  <span class="hljs-number">5m</span>; 

  <span class="hljs-comment"># &#x9009;&#x62E9;&#x52A0;&#x5BC6;&#x5957;&#x4EF6;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x6240;&#x652F;&#x6301;&#x7684;&#x5957;&#x4EF6;&#xFF08;&#x548C;&#x987A;&#x5E8F;&#xFF09;&#x53EF;&#x80FD;&#x4F1A;&#x4E0D;&#x540C;&#x3002;</span>
  <span class="hljs-comment"># &#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7684;&#x662F;OpenSSL&#x5E93;&#x80FD;&#x591F;&#x8BC6;&#x522B;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; openssl -v cipher &apos;RC4:HIGH:!aNULL:!MD5&apos;&#xFF08;&#x540E;&#x9762;&#x662F;&#x4F60;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x5957;&#x4EF6;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#xFF09; &#x6765;&#x770B;&#x6240;&#x652F;&#x6301;&#x7B97;&#x6CD5;&#x3002;</span>
  <span class="hljs-attribute">ssl_ciphers</span>  HIGH:!aNULL:!MD5;

  <span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x534F;&#x5546;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x65F6;&#xFF0C;&#x4F18;&#x5148;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x52A0;&#x5BC6;&#x5957;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x52A0;&#x5BC6;&#x5957;&#x4EF6;&#x3002;</span>
  <span class="hljs-attribute">ssl_prefer_server_ciphers</span>  <span class="hljs-literal">on</span>;

  <span class="hljs-attribute">location</span> / {
    <span class="hljs-attribute">root</span>   html;
    <span class="hljs-attribute">index</span>  index.html index.htm;
  }
}
</code></pre>
<h2 id="t8&#x53C2;&#x8003;&#x9605;&#x8BFB;">&#x53C2;&#x8003;&#x9605;&#x8BFB; <a href="#t8&#x53C2;&#x8003;&#x9605;&#x8BFB;"> # </a></h2>
<ul>
<li><a href="http://www.laozuo.org/7742.html">&#x5229;&#x7528;SSL For Free&#x5DE5;&#x5177;3&#x5206;&#x949F;&#x83B7;&#x53D6;Let&apos;s Encrypt&#x514D;&#x8D39;SSL&#x8BC1;&#x4E66;</a></li>
<li><a href="https://mp.weixin.qq.com/s/UHTMJjglrgjBHxi5l1EO8g">Let&apos;s Encrypt&#xFF1A;&#x7528;&#x514D;&#x8D39;&#x7684; SSL &#x8BC1;&#x4E66;&#xFF0C;&#x8BA9;&#x7F51;&#x7AD9;&#x652F;&#x6301; HTTPS</a></li>
<li><a href="https://certbot.eff.org/">Automatically enable HTTPS on your website with EFF&apos;s Certbot, deploying Let&apos;s Encrypt certificates.</a></li>
</ul>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>


</body>
</html>

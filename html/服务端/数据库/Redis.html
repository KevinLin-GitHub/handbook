<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>handbook</title>
    <link rel="stylesheet" type="text/css" href="../../../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            <img src="../../../idoc-logo.svg">
        
    </div>
<ul><li><a href="../../../index.html">正则完整篇</a></li><li><a href="#"><span></span>前端</a><ul><li><a href="#"><span></span>Javascript</a><ul><li><a href="#"><span></span>React</a><ul><li><a href="../../../html/前端/Javascript/React/10、react结合redux实战篇.html">10、react结合redux实战篇</a></li><li><a href="../../../html/前端/Javascript/React/11、React Router 4.html">11、React Router 4</a></li><li><a href="../../../html/前端/Javascript/React/12、Immutable学习记录.html">12、Immutable学习记录</a></li><li><a href="../../../html/前端/Javascript/React/1、环境的搭建.html">1、环境的搭建</a></li><li><a href="../../../html/前端/Javascript/React/2、JSX语法及非DOM操作属性.html">2、JSX语法及非DOM操作属性</a></li><li><a href="../../../html/前端/Javascript/React/3、组件的生命周期以及属性状态.html">3、组件的生命周期以及属性状态</a></li><li><a href="../../../html/前端/Javascript/React/4、事件.html">4、事件</a></li><li><a href="../../../html/前端/Javascript/React/5、组件的协同及（不）可控组件.html">5、组件的协同及（不）可控组件</a></li><li><a href="../../../html/前端/Javascript/React/6、action、store、reducer分析.html">6、action、store、reducer分析</a></li><li><a href="../../../html/前端/Javascript/React/7、异步Action及操作.html">7、异步Action及操作</a></li><li><a href="../../../html/前端/Javascript/React/8、浅析中间件.html">8、浅析中间件</a></li><li><a href="../../../html/前端/Javascript/React/9、源码分析.html">9、源码分析</a></li></ul></li><li><a href="#"><span></span>React Native</a><ul><li><a href="../../../html/前端/Javascript/React Native/React-native Android环境搭建.html">React-native Android环境搭建</a></li></ul></li><li><a href="../../../html/前端/Javascript/思维导图.html">思维导图</a></li><li><a href="../../../html/前端/Javascript/正则完整篇.html">正则完整篇</a></li><li><a href="../../../html/前端/Javascript/正则表达式.html">正则表达式</a></li><li><a href="../../../html/前端/Javascript/轻量高效的开源JavaScript插件和库.html">轻量高效的开源JavaScript插件和库</a></li></ul></li></ul></li><li><a href="#"><span></span>服务端</a><ul><li><a href="../../../html/服务端/docker.html">docker</a></li><li><a href="#"><span></span>node</a><ul><li><a href="#"><span></span>框架</a><ul><li><a href="../../../html/服务端/node/框架/express详细使用.html">express详细使用</a></li><li><a href="../../../html/服务端/node/框架/koa基本用法.html">koa基本用法</a></li></ul></li></ul></li><li><a href="#"><span></span>shell</a><ul><li><a href="../../../html/服务端/shell/shell正则.html">shell正则</a></li><li><a href="../../../html/服务端/shell/shell脚本入门.html">shell脚本入门</a></li></ul></li><li><a href="#"><span></span>数据库</a><ul><li class="active"><a href="../../../html/服务端/数据库/Redis.html">Redis</a></li><li><a href="#"><span></span>mysql</a><ul><li><a href="../../../html/服务端/数据库/mysql/Mysql入门.html">Mysql入门</a></li><li><a href="../../../html/服务端/数据库/mysql/awesome-mysql.html">awesome-mysql</a></li><li><a href="#"><span></span>第一章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第一章/1.1.html">1.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.2.html">1.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.3.html">1.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.4.html">1.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第一章/1.html">1</a></li></ul></li><li><a href="#"><span></span>第三章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第三章/3.1.html">3.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.2.html">3.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.3.html">3.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.4.html">3.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.5.html">3.5</a></li><li><a href="../../../html/服务端/数据库/mysql/第三章/3.html">3</a></li></ul></li><li><a href="#"><span></span>第二章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第二章/2.1.html">2.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.2.html">2.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.3.html">2.3</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.4.html">2.4</a></li><li><a href="../../../html/服务端/数据库/mysql/第二章/2.5.html">2.5</a></li></ul></li><li><a href="#"><span></span>第四章</a><ul><li><a href="../../../html/服务端/数据库/mysql/第四章/4.1.html">4.1</a></li><li><a href="../../../html/服务端/数据库/mysql/第四章/4.2.html">4.2</a></li><li><a href="../../../html/服务端/数据库/mysql/第四章/4.3.html">4.3</a></li></ul></li></ul></li></ul></li><li><a href="../../../html/服务端/Nginx.html">Nginx</a></li><li><a href="#"><span></span>centos</a><ul><li><a href="../../../html/服务端/centos/CentOS7安装KVM虚拟机详解.html">CentOS7安装KVM虚拟机详解</a></li><li><a href="../../../html/服务端/centos/CentOS7安装维护Gitlab.html">CentOS7安装维护Gitlab</a></li><li><a href="../../../html/服务端/centos/CentOS7安装配置vsftp搭建FTP.html">CentOS7安装配置vsftp搭建FTP</a></li><li><a href="../../../html/服务端/centos/CentOS7更换yum软件镜像源.html">CentOS7更换yum软件镜像源</a></li><li><a href="../../../html/服务端/centos/CentOS7网络配置.html">CentOS7网络配置</a></li><li><a href="../../../html/服务端/centos/Centos7安装编译Node.html">Centos7安装编译Node</a></li><li><a href="../../../html/服务端/centos/Centos常用命令.html">Centos常用命令</a></li><li><a href="../../../html/服务端/centos/Elasticsearch安装维护.html">Elasticsearch安装维护</a></li><li><a href="../../../html/服务端/centos/Golang安装.html">Golang安装</a></li><li><a href="../../../html/服务端/centos/Linux添加、删除用户和用户组.html">Linux添加、删除用户和用户组</a></li><li><a href="../../../html/服务端/centos/Mac下制作CentOS7启动盘.html">Mac下制作CentOS7启动盘</a></li><li><a href="../../../html/服务端/centos/Mac使用NFS连接CentOS上的共享文件夹.html">Mac使用NFS连接CentOS上的共享文件夹</a></li><li><a href="../../../html/服务端/centos/Nginx 安装.html">Nginx 安装</a></li><li><a href="../../../html/服务端/centos/Python2升级到Python3.html">Python2升级到Python3</a></li><li><a href="../../../html/服务端/centos/Rocket.Chat.html">Rocket.Chat</a></li><li><a href="../../../html/服务端/centos/Ruby安装.html">Ruby安装</a></li><li><a href="../../../html/服务端/centos/chmod.html">chmod</a></li><li><a href="../../../html/服务端/centos/samba.html">samba</a></li><li><a href="../../../html/服务端/centos/使用免费SSL证书让网站支持HTTPS访问.html">使用免费SSL证书让网站支持HTTPS访问</a></li><li><a href="../../../html/服务端/centos/修改ssh端口号的方法.html">修改ssh端口号的方法</a></li><li><a href="../../../html/服务端/centos/在5分钟内搭建企业内部私有npm仓库.html">在5分钟内搭建企业内部私有npm仓库</a></li><li><a href="../../../html/服务端/centos/安装Java.html">安装Java</a></li><li><a href="../../../html/服务端/centos/安装openstack.html">安装openstack</a></li><li><a href="../../../html/服务端/centos/安装pip工具.html">安装pip工具</a></li><li><a href="../../../html/服务端/centos/安装使用svn.html">安装使用svn</a></li><li><a href="../../../html/服务端/centos/尝试在CentOS7.2上编译安装Swift.html">尝试在CentOS7.2上编译安装Swift</a></li><li><a href="../../../html/服务端/centos/常用基础命令.html">常用基础命令</a></li><li><a href="../../../html/服务端/centos/搭建Shadowsocks服务器.html">搭建Shadowsocks服务器</a></li><li><a href="../../../html/服务端/centos/管理远程会话screen工具.html">管理远程会话screen工具</a></li><li><a href="../../../html/服务端/centos/部署Seafile搭建自己的网盘.html">部署Seafile搭建自己的网盘</a></li></ul></li></ul></li><li><a href="#"><span></span>工具箱</a><ul><li><a href="../../../html/工具箱/Git常用命令.html">Git常用命令</a></li><li><a href="../../../html/工具箱/vim.html">vim</a></li><li><a href="#"><span></span>代码片段</a><ul><li><a href="../../../html/工具箱/代码片段/100个JavaScript代码片段.html">100个JavaScript代码片段</a></li></ul></li><li><a href="#"><span></span>服务构建</a><ul><li><a href="../../../html/工具箱/服务构建/持续集成服务 Travis CI.html">持续集成服务 Travis CI</a></li></ul></li></ul></li><li><a href="#"><span></span>其他</a><ul><li><a href="../../../html/其他/HTTP状态码.html">HTTP状态码</a></li><li><a href="../../../html/其他/通过代理工具提高Github Clone速度.html">通过代理工具提高Github Clone速度</a></li></ul></li><li><a href="../../../html/收藏夹.html">收藏夹</a></li></ul></div>


<div class="forkgithub"><a target="_blank" href="https://github.com/poetries/handbook"></a></div>

<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t0Redis安装">Redis安装</a><ul><li><a href="#t1官方编译安装">官方编译安装</a></li><li><a href="#t2通过EPEL源安装">通过EPEL源安装</a></li><li><a href="#t3Redis升级">Redis升级</a></li></ul></li><li><a href="#t4服务管理">服务管理</a><ul><li><a href="#t5基本服务操作">基本服务操作</a></li><li><a href="#t6查看版本">查看版本</a></li><li><a href="#t7开机启动">开机启动</a></li></ul></li><li><a href="#t8更改配置">更改配置</a></li><li><a href="#t9设置请求密码">设置请求密码</a></li><li><a href="#t10主从架构配置">主从架构配置</a></li><li><a href="#t11基本操作">基本操作</a></li><li><a href="#t12支持的数据类型">支持的数据类型</a><ul><li><a href="#t13字符串">字符串</a></li><li><a href="#t14Hashes - 哈希值">Hashes - 哈希值</a></li><li><a href="#t15Lists - 列表">Lists - 列表</a></li><li><a href="#t16有序集合">有序集合</a></li></ul></li><li><a href="#t17开启通知">开启通知</a></li><li><a href="#t18开启远程登录连接">开启远程登录连接</a><ul><li><a href="#t19修改防火墙配置">修改防火墙配置</a></li><li><a href="#t20修改配置文件">修改配置文件</a></li></ul></li><li><a href="#t21提供的原生监控">提供的原生监控</a><ul><li><a href="#t22当前链接的客户端数和连接数">当前链接的客户端数和连接数</a></li><li><a href="#t23内存最大的键值和平均的键值数据">内存最大的键值和平均的键值数据</a></li><li><a href="#t24查看当前的键值情况">查看当前的键值情况</a></li><li><a href="#t25原生的Monitor监控">原生的Monitor监控</a></li></ul></li><li><a href="#t26配置说明">配置说明</a></li><li><a href="#t27精品文章">精品文章</a></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="t0Redis&#x5B89;&#x88C5;">Redis&#x5B89;&#x88C5; <a href="#t0Redis&#x5B89;&#x88C5;"> # </a></h2>
<h3 id="t1&#x5B98;&#x65B9;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;">&#x5B98;&#x65B9;&#x7F16;&#x8BD1;&#x5B89;&#x88C5; <a href="#t1&#x5B98;&#x65B9;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"> # </a></h3>
<pre><code class="lang-bash">$ wget http://download.redis.io/releases/redis-4.0.0.tar.gz
$ tar xzvf redis-4.0.0.tar.gz -C /usr/<span class="hljs-built_in">local</span>/
$ <span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span>/redis-4.0.0
$ make
$ make <span class="hljs-built_in">test</span>
$ make install 
<span class="hljs-comment"># &#x7A0B;&#x5E8F;&#x4F1A;&#x81EA;&#x52A8;&#x6267;&#x884C;:</span>
<span class="hljs-comment"># mkdir -p /usr/local/bin</span>
<span class="hljs-comment"># cp -pf redis-server /usr/local/bin</span>
<span class="hljs-comment"># cp -pf redis-benchmark /usr/local/bin</span>
<span class="hljs-comment"># cp -pf redis-cli /usr/local/bin</span>
<span class="hljs-comment"># cp -pf redis-check-dump /usr/local/bin</span>
<span class="hljs-comment"># cp -pf redis-check-aof /usr/local/bin</span>
</code></pre>
<p>&#x6D4B;&#x8BD5;<code>make test</code>&#x62A5;&#x9519;</p>
<pre><code>$ make test
You need tcl 8.5 or newer in order to run the Redis test
make: *** [test] Error 1
</code></pre><p>&#x8FD9;&#x4E2A;&#x662F;&#x9700;&#x8981;&#x5B89;&#x88C5;<code>tcl</code></p>
<pre><code>wget http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz  
sudo tar xzvf tcl8.6.1-src.tar.gz  -C /usr/local/  
cd  /usr/local/tcl8.6.1/unix/  
sudo ./configure  
sudo make  
sudo make install   
</code></pre><h3 id="t2&#x901A;&#x8FC7;EPEL&#x6E90;&#x5B89;&#x88C5;">&#x901A;&#x8FC7;EPEL&#x6E90;&#x5B89;&#x88C5; <a href="#t2&#x901A;&#x8FC7;EPEL&#x6E90;&#x5B89;&#x88C5;"> # </a></h3>
<p>&#x6E90;&#x5B89;&#x88C5;&#x95EE;&#x9898;&#x5728;&#x4E8E;&#x4E0D;&#x80FD;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#xFF0C;&#x6216;&#x8005;&#x6307;&#x5B9A;Redis&#x7248;&#x672C;&#x3002;</p>
<pre><code class="lang-bash">yum --enablerepo=epel -y install redis
</code></pre>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5B89;&#x88C5;&#x6E90;&#xFF0C;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;&#x6E90;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> /etc/yum.repos.d/
rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</code></pre>
<h3 id="t3Redis&#x5347;&#x7EA7;">Redis&#x5347;&#x7EA7; <a href="#t3Redis&#x5347;&#x7EA7;"> # </a></h3>
<p>&#x9996;&#x5148;&#xFF0C;&#x786E;&#x4FDD;&#x5B89;&#x88C5;&#x4E86;&#x4EE5;&#x4E0B;repos&#xFF0C;EPEL&#x548C;REMI&#xFF1A;</p>
<pre><code class="lang-bash">sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
sudo rpm -Uvh http://rpms.remirepo.net/enterprise/remi-release-6.rpm
</code></pre>
<p>&#x901A;&#x8FC7;<code>--enablerepo=epel</code>&#x53C2;&#x6570;&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x6E90;Redis&#x7248;&#x672C;&#xFF0C;&#x68C0;&#x67E5;REMI repo&#x4E2D;&#x7684;Redis&#x7248;&#x672C;&#xFF1A;</p>
<pre><code class="lang-bash">yum --enablerepo=epel info redis
<span class="hljs-comment"># Loaded plugins: fastestmirror</span>
<span class="hljs-comment"># Loading mirror speeds from cached hostfile</span>
<span class="hljs-comment">#  * base: centos.ustc.edu.cn</span>
<span class="hljs-comment">#  * epel: mirrors.tuna.tsinghua.edu.cn</span>
<span class="hljs-comment">#  * extras: centos.ustc.edu.cn</span>
<span class="hljs-comment">#  * updates: mirrors.zju.edu.cn</span>
<span class="hljs-comment"># Available Packages</span>
<span class="hljs-comment"># Name        : redis</span>
<span class="hljs-comment"># Arch        : x86_64</span>
<span class="hljs-comment"># Version     : 2.4.10</span>
<span class="hljs-comment"># Release     : 1.el6</span>
<span class="hljs-comment"># Size        : 213 k</span>
<span class="hljs-comment"># Repo        : epel/x86_64</span>
<span class="hljs-comment"># Summary     : A persistent key-value database</span>
<span class="hljs-comment"># URL         : http://redis.io</span>
<span class="hljs-comment"># License     : BSD</span>
<span class="hljs-comment"># Description : Redis is an advanced key-value store. It is similar to memcached but the data</span>
<span class="hljs-comment">#             : set is not volatile, and values can be strings, exactly like in memcached, but</span>
<span class="hljs-comment">#             : also lists, sets, and ordered sets. All this data types can be manipulated with</span>
<span class="hljs-comment">#             : atomic operations to push/pop elements, add/remove elements, perform server</span>
<span class="hljs-comment">#             : side union, intersection, difference between sets, and so forth. Redis supports</span>
<span class="hljs-comment">#             : different kind of sorting abilities.</span>
</code></pre>
<p>&#x7136;&#x540E;&#x4ECE;EPEL repo&#x5B89;&#x88C5;&#x76F8;&#x5173;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF08;jemalloc&#xFF09;&#xFF1A;</p>
<pre><code class="lang-bash">yum --enablerepo=epel install jemalloc
</code></pre>
<p>&#x5728;&#x5B89;&#x88C5;&#x4E4B;&#x524D;&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x505C;&#x6B62;&#x65E7;&#x7684;Redis&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF1A;</p>
<pre><code class="lang-bash">service redis stop
</code></pre>
<p>&#x7136;&#x540E;&#x5B89;&#x88C5;&#x66F4;&#x65B0;&#x7248;&#x672C;&#x7684;Redis&#xFF1A;</p>
<pre><code class="lang-bash">sudo yum --enablerepo=remi install redis
</code></pre>
<h2 id="t4&#x670D;&#x52A1;&#x7BA1;&#x7406;">&#x670D;&#x52A1;&#x7BA1;&#x7406; <a href="#t4&#x670D;&#x52A1;&#x7BA1;&#x7406;"> # </a></h2>
<p>&#x91CD;&#x65B0;&#x542F;&#x52A8;Redis&#x5B88;&#x62A4;&#x7A0B;&#x5E8F;&#xFF0C;&#x5E76;&#x4F7F;&#x5176;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x65F6;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#xFF1A;</p>
<pre><code class="lang-bash">sudo service redis start
sudo chkconfig redis on
</code></pre>
<h3 id="t5&#x57FA;&#x672C;&#x670D;&#x52A1;&#x64CD;&#x4F5C;">&#x57FA;&#x672C;&#x670D;&#x52A1;&#x64CD;&#x4F5C; <a href="#t5&#x57FA;&#x672C;&#x670D;&#x52A1;&#x64CD;&#x4F5C;"> # </a></h3>
<pre><code class="lang-bash"><span class="hljs-comment">## &#x542F;&#x52A8;&#x5E76;&#x540E;&#x53F0;&#x8FD0;&#x884C;</span>
$ redis-server &amp; nohup
<span class="hljs-comment">## &#x67E5;&#x662F;&#x5426;&#x542F;&#x52A8;</span>
$ redis-cli ping
<span class="hljs-comment">## &#x5173;&#x95ED;&#x547D;&#x4EE4;</span>
$ redis-cli shutdown

<span class="hljs-comment"># &#x547D;&#x4EE4;&#x884C;&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;</span>
$ redis-cli start
<span class="hljs-comment"># &#x542F;&#x52A8;</span>
$ service redis start
<span class="hljs-comment"># &#x505C;&#x6B62;</span>
$ service redis stop

<span class="hljs-comment"># &#x547D;&#x4EE4;&#x884C;&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;</span>
$ redis-cli -p 6380

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x540E;&#x53F0;&#x542F;&#x52A8;</span>
$ redis-server --port 6380 &amp;
</code></pre>
<h3 id="t6&#x67E5;&#x770B;&#x7248;&#x672C;">&#x67E5;&#x770B;&#x7248;&#x672C; <a href="#t6&#x67E5;&#x770B;&#x7248;&#x672C;"> # </a></h3>
<p>&#x68C0;&#x67E5;&#x5F53;&#x524D;&#x5B89;&#x88C5;&#x7684;Redis&#x7248;&#x672C;&#xFF1A;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x67E5;&#x770B; Redis &#x7248;&#x672C;</span>
$ redis-cli info | grep redis_version

<span class="hljs-comment"># &#x67E5;&#x770B;&#x7AEF;&#x53E3;&#x53F7;</span>
$ redis-cli info | grep tcp_port
</code></pre>
<h3 id="t7&#x5F00;&#x673A;&#x542F;&#x52A8;">&#x5F00;&#x673A;&#x542F;&#x52A8; <a href="#t7&#x5F00;&#x673A;&#x542F;&#x52A8;"> # </a></h3>
<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x901A;&#x8FC7;yum&#x5B89;&#x88C5;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x65B9;&#x5F0F;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x3002;</p>
<pre><code class="lang-bash">systemctl <span class="hljs-built_in">enable</span> redis.servic
chkconfig redis on
</code></pre>
<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x53EF;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x542F;&#x52A8;</p>
<p>&#x6211;&#x4EEC;&#x5C06;&#x5728; Redis &#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x627E;&#x5230;<code>/usr/local/redis-4.0.0/utils</code>&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;&#x6709;&#x4E2A;&#x6709;&#x4E2A;&#x811A;&#x672C; <code>redis_init_script</code>&#xFF0C;&#x5C06;&#x6B64;&#x811A;&#x672C;&#x62F7;&#x8D1D;&#x5230;<code>/etc/init.d</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x547D;&#x540D;&#x4E3A;<code>redis</code>: </p>
<pre><code class="lang-bash">cp /usr/<span class="hljs-built_in">local</span>/redis-4.0.0/utils/redis_init_script /etc/init.d/redis
</code></pre>
<p>&#x62F7;&#x8D1D;&#x4E00;&#x4E0B;<code>redis.conf</code> &#x6587;&#x4EF6;&#x5230;<code>/etc/redis</code>&#x76EE;&#x5F55;&#x4E0B;</p>
<pre><code class="lang-bash">cp /usr/<span class="hljs-built_in">local</span>/redis-4.0.0/redis.conf /etc/redis/6380.conf
</code></pre>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>6380.conf</code>&#x9700;&#x8981;&#x66F4;&#x6539;&#x51E0;&#x4E2A;&#x5730;&#x65B9;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x662F;&#x5426;&#x5728;&#x540E;&#x53F0;&#x6267;&#x884C;&#xFF0C;yes&#xFF1A;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF1B;no&#xFF1A;&#x4E0D;&#x662F;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF08;&#x8001;&#x7248;&#x672C;&#x9ED8;&#x8BA4;&#xFF09;</span>
daemonize yes
</code></pre>
<p>&#x66F4;&#x6539;&#x6743;&#x9650;&#xFF0C;&#x901A;&#x8FC7; <a href="https://jaywcjlove.github.io/linux-command/c/chkconfig.html">chkconfig</a> &#x547D;&#x4EE4;&#x68C0;&#x67E5;&#x3001;&#x8BBE;&#x7F6E;&#x7CFB;&#x7EDF;redis&#x670D;&#x52A1;&#x5F00;&#x542F;</p>
<pre><code class="lang-bash">chmod +x /etc/init.d/redis
chkconfig redis on
</code></pre>
<p>&#x5FC5;&#x987B;&#x628A;&#x4E0B;&#x9762;&#x4E24;&#x884C;&#x6CE8;&#x91CA;&#x653E;&#x5728; <code>/etc/init.d/redis</code> &#x6587;&#x4EF6;&#x5934;&#x90E8;&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x4F1A;&#x62A5;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x63D0;&#x793A; <code>service redis does not support chkconfig</code></p>
<pre><code class="lang-bash"><span class="hljs-comment"># chkconfig:   2345 90 10</span>
<span class="hljs-comment"># description:  redis is a persistent key-value database</span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;redis&#x670D;&#x52A1;&#x5FC5;&#x987B;&#x5728;&#x8FD0;&#x884C;&#x7EA7;2&#xFF0C;3&#xFF0C;4&#xFF0C;5&#x4E0B;&#x88AB;&#x542F;&#x52A8;&#x6216;&#x5173;&#x95ED;&#xFF0C;&#x542F;&#x52A8;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x662F;90&#xFF0C;&#x5173;&#x95ED;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x662F;10&#x3002;</p>
<p><strong>Redis &#x542F;&#x52A8;&#x8B66;&#x544A;&#x9519;&#x8BEF;&#x89E3;&#x51B3;</strong></p>
<ol>
<li>WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &apos;vm.overcommit_memory = 1&apos; to /etc/sysctl.conf and then reboot or run the command &apos;sysctl vm.overcommit_memory=1&apos; for this to take effect.</li>
</ol>
<pre><code class="lang-shell">echo &quot;vm.overcommit_memory=1&quot; &gt; /etc/sysctl.conf  # &#x6216; vi /etcsysctl.conf , &#x7136;&#x540E;reboot&#x91CD;&#x542F;&#x673A;&#x5668;
echo 1 &gt; /proc/sys/vm/overcommit_memory  # &#x4E0D;&#x9700;&#x8981;&#x542F;&#x673A;&#x5668;&#x5C31;&#x751F;&#x6548;
</code></pre>
<ol start="2">
<li>WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</li>
</ol>
<pre><code class="lang-shell">echo 511 &gt; /proc/sys/net/core/somaxconn
</code></pre>
<h2 id="t8&#x66F4;&#x6539;&#x914D;&#x7F6E;">&#x66F4;&#x6539;&#x914D;&#x7F6E; <a href="#t8&#x66F4;&#x6539;&#x914D;&#x7F6E;"> # </a></h2>
<p>Redis &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E; Redis &#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x6587;&#x4EF6;&#x540D;&#x4E3A; <code>redis.conf</code>&#x3002;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5C06;&#x5B83;&#x62F7;&#x8D1D;&#x5230;<code>/etc/redis</code>&#x76EE;&#x5F55;&#x4E0B;&#x4E86;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5728; <code>sudo vi /etc/redis/6380.conf</code> &#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x7F16;&#x8F91;</p>
<pre><code class="lang-bash">sudo vi /etc/redis/6380.conf
</code></pre>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; CONFIG &#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6216;&#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x9879;&#x3002;&#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x547D;&#x4EE4;</p>
<pre><code class="lang-bash"><span class="hljs-comment">## &#x8FDB;&#x5165;redis&#x83B7;&#x53D6;</span>
127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME
<span class="hljs-comment">## &#x8FDB;&#x5165;redis&#x8BBE;&#x7F6E;</span>
127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE

<span class="hljs-comment">## &#x83B7;&#x53D6;&#x6240;&#x6709;&#x914D;&#x7F6E;</span>
127.0.0.1:6379&gt; CONFIG GET *

<span class="hljs-comment">## &#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x5F00;&#x542F;&#x901A;&#x77E5;&#x529F;&#x80FD;</span>
$ redis-cli config <span class="hljs-built_in">set</span> notify-keyspace-events KEA
</code></pre>
<h2 id="t9&#x8BBE;&#x7F6E;&#x8BF7;&#x6C42;&#x5BC6;&#x7801;">&#x8BBE;&#x7F6E;&#x8BF7;&#x6C42;&#x5BC6;&#x7801; <a href="#t9&#x8BBE;&#x7F6E;&#x8BF7;&#x6C42;&#x5BC6;&#x7801;"> # </a></h2>
<p>&#x6253;&#x5F00; <code>vim /etc/redis/6380.conf</code> &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7F16;&#x8F91;&#x5B83;&#xFF0C;&#x66F4;&#x6539;&#x4E0B;&#x9762;&#x4E24;&#x9879;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># ...</span>
<span class="hljs-comment"># requirepass foobared</span>
<span class="hljs-comment"># &#x66F4;&#x6539;&#x6210;&#x4E0B;&#x9762;&#x5185;&#x5BB9;&#xFF0C;&#x628A; foobared &#x6539;&#x4E3A;&#x4F60;&#x60F3;&#x8981;&#x8BBE;&#x7F6E;&#x7684;&#x5BC6;&#x7801;</span>
requirepass 111111

<span class="hljs-comment"># bind 127.0.0.1 &#x53BB;&#x6389; # &#x6CE8;&#x91CA;&#x5E76;&#x6539;&#x4E3A;</span>
<span class="hljs-built_in">bind</span> 0.0.0.0
</code></pre>
<p>&#x66F4;&#x6539;&#x4E3A;&#x4E4B;&#x540E;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x5E26;&#x5BC6;&#x7801;&#x8BBF;&#x95EE;redis&#x4E86;&#x3002;</p>
<pre><code class="lang-bash">redis-cli -h 127.0.0.1 -p 6379 -a 111111
</code></pre>
<h2 id="t10&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x914D;&#x7F6E;">&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x914D;&#x7F6E; <a href="#t10&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x914D;&#x7F6E;"> # </a></h2>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E24;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x53F0;&#x505A;&#x4E3B;&#xFF0C;&#x4E00;&#x53F0;&#x505A;&#x4ECE;</p>
<pre><code class="lang-bash">Redis &#x4E3B;&#x4FE1;&#x606F;&#xFF1A;
  IP&#xFF1A;12.168.1.114
  &#x7AEF;&#x53E3;&#xFF1A;6379
Redis &#x4ECE;&#x4FE1;&#x606F;&#xFF1A;
  IP&#xFF1A;12.168.1.115
  &#x7AEF;&#x53E3;&#xFF1A;6379
</code></pre>
<p>&#x7F16;&#x8F91;&#x4ECE;&#x673A;&#x7684; Redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x627E;&#x5230; <code># slaveof</code>&#x5F00;&#x5934;&#x7684;&#x8FD9;&#x4E00;&#x884C;&#x5E94;&#x8BE5;&#x662F;&#x6CE8;&#x91CA;&#x7684;&#xFF1A;<code># slaveof &lt;masterip&gt; &lt;masterport&gt;</code>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x53BB;&#x6389;&#x8BE5;&#x6CE8;&#x91CA;&#xFF0C;&#x5E76;&#x4E14;&#x586B;&#x5199;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x673A;&#x7684; IP &#x548C; &#x7AEF;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;<code>slaveof 192.168.1.114 6379</code>&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># slaveof &lt;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x673A;&#x7684; IP&gt; &lt;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x673A;&#x7684; &#x7AEF;&#x53E3;&gt;</span>
<span class="hljs-comment"># &#x8FD9;&#x884C;&#x66F4;&#x6539;&#x6210;&#x4E0B;&#x9762;&#x5185;&#x5BB9;</span>
slaveof 192.168.1.114 6379
</code></pre>
<p>&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#x91CD;&#x542F;&#x4ECE;&#x673A; Redis &#x670D;&#x52A1;&#x91CD;&#x542F;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x8FDB;&#x5165;&#x4E3B;&#x673A;&#x7684; redis-cli &#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;&#xFF1A;<code>INFO replication</code> &#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x5F53;&#x524D;&#x4E3B;&#x673A;&#x7684; redis &#x5904;&#x4E8E;&#x4EC0;&#x4E48;&#x89D2;&#x8272;&#xFF0C;&#x6709;&#x54EA;&#x4E9B;&#x4ECE;&#x673A;&#x5DF2;&#x7ECF;&#x8FDE;&#x4E0A;&#x4E3B;&#x673A;&#x3002;</p>
<p>&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#x4E3B;&#x4ECE;&#x914D;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6D4B;&#x8BD5;&#x4E0B;&#xFF1A;</p>
<ol>
<li>&#x6211;&#x4EEC;&#x8FDB;&#x5165;&#x4E3B;&#x673A;&#x7684; redis-cli &#x72B6;&#x6001;&#xFF0C;&#x7136;&#x540E; set &#x67D0;&#x4E2A;&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;set mygithub jaywcjlove</li>
<li>&#x6211;&#x4EEC;&#x5207;&#x6362;&#x8FDB;&#x5165;&#x4ECE;&#x673A;&#x7684; redis-cli &#x7684;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x83B7;&#x53D6;&#x521A;&#x521A;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x770B;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF1A;get mygithub&#xFF0C;&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x662F;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x503C;&#x7684;&#x3002;</li>
<li>&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#xFF1A;&#x4ECE;&#x5E93;&#x4E0D;&#x5177;&#x5907;&#x5199;&#x5165;&#x6570;&#x636E;&#x80FD;&#x529B;&#xFF0C;&#x4E0D;&#x7136;&#x4F1A;&#x62A5;&#x9519;&#x3002; &#x4ECE;&#x5E93;&#x53EA;&#x6709;&#x53EA;&#x8BFB;&#x80FD;&#x529B;&#x3002;</li>
</ol>
<h2 id="t11&#x57FA;&#x672C;&#x64CD;&#x4F5C;">&#x57FA;&#x672C;&#x64CD;&#x4F5C; <a href="#t11&#x57FA;&#x672C;&#x64CD;&#x4F5C;"> # </a></h2>
<pre><code class="lang-bash"><span class="hljs-comment">## &#x547D;&#x4EE4;&#x884C;&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;</span>
$ redis-cli

<span class="hljs-comment"># &#x6D4B;&#x8BD5;&#x5FC3;&#x8DF3;</span>
127.0.0.1:6379&gt; ping
PONG

<span class="hljs-comment"># &#x8BBE;&#x7F6E; mykey &#x952E;&#x7684;&#x503C;</span>
127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> mykey hello
OK

<span class="hljs-comment"># &#x83B7;&#x53D6; mykey &#x952E;&#x7684;&#x503C;</span>
127.0.0.1:6379&gt; get mykey
<span class="hljs-string">&quot;hello&quot;</span>

<span class="hljs-comment">## &#x8BBE;&#x7F6E; mykey &#x5931;&#x6548;&#x4E8B;&#x4EF6;</span>
127.0.0.1:6379&gt; expire mykey 2


<span class="hljs-comment"># &#x67E5;&#x770B;&#x5F53;&#x524D;redis&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</span>
127.0.0.1:6379&gt; config get *

<span class="hljs-comment"># &#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;key</span>
127.0.0.1:6379&gt; keys *

<span class="hljs-comment"># &#x5220;&#x9664;redis&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;Key</span>
127.0.0.1:6379&gt; flushdb

127.0.0.1:6379&gt; config get dir

<span class="hljs-comment"># &#x998B;&#x54ED;&#x5F53;&#x524D;&#x5E93; key &#x7684;&#x6570;&#x91CF;</span>
127.0.0.1:6379&gt; dbsize

<span class="hljs-comment"># &#x5220;&#x9664;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;key</span>
127.0.0.1:6379&gt; flushall

<span class="hljs-comment"># &#x9000;&#x51FA;</span>
127.0.0.1:6379&gt; <span class="hljs-built_in">exit</span>


<span class="hljs-comment"># &#x627E;&#x51FA;&#x62D6;&#x6162; Redis &#x7684;&#x7F6A;&#x9B41;&#x7978;&#x9996;</span>
<span class="hljs-comment"># &#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x7EDF;&#x8BA1;&#x7684;&#x5FEB;&#x7167;&#xFF0C;</span>
<span class="hljs-comment"># &#x6BD4;&#x5982;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x4E86;&#x591A;&#x5C11;&#x6B21;&#xFF0C;</span>
<span class="hljs-comment"># &#x6267;&#x884C;&#x547D;&#x4EE4;&#x6240;&#x8017;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;(&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x603B;&#x65F6;&#x95F4;&#x548C;&#x5E73;&#x5747;&#x65F6;&#x95F4;)</span>
<span class="hljs-comment"># &#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x5730;&#x6267;&#x884C; CONFIG RESETSTAT &#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x7F6E;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x7EDF;&#x8BA1;&#x7ED3;&#x679C;&#x3002;</span>

127.0.0.1:6379&gt; commandstats
cmdstat_get:calls=78,usec=608,usec_per_call=7.79
cmdstat_setex:calls=5,usec=71,usec_per_call=14.20
cmdstat_keys:calls=2,usec=42,usec_per_call=21.00
cmdstat_info:calls=10,usec=1931,usec_per_call=193.10
</code></pre>
<h2 id="t12&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;">&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B; <a href="#t12&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;"> # </a></h2>
<h3 id="t13&#x5B57;&#x7B26;&#x4E32;">&#x5B57;&#x7B26;&#x4E32; <a href="#t13&#x5B57;&#x7B26;&#x4E32;"> # </a></h3>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x542F;&#x52A8;&#x5BA2;&#x6237;&#x7AEF; ,&#x5B58;&#x50A8;&#x5B57;&#x7B26;&#x4E32;&#x5230;redis.</span>
redis&gt; SET name forezp
OK
<span class="hljs-comment"># &#x53D6;&#x5B57;&#x7B26;&#x4E32;:</span>
redis&gt; get name 
<span class="hljs-string">&quot;forezp&quot;</span>
</code></pre>
<h3 id="t14Hashes - &#x54C8;&#x5E0C;&#x503C;">Hashes - &#x54C8;&#x5E0C;&#x503C; <a href="#t14Hashes - &#x54C8;&#x5E0C;&#x503C;"> # </a></h3>
<pre><code class="lang-bash">redis &gt; HMSET king username forezp password xxdxx age 22
redis &gt; HGETALL king
1) <span class="hljs-string">&quot;username&quot;</span>
2) <span class="hljs-string">&quot;forezp &quot;</span>
3) <span class="hljs-string">&quot;password &quot;</span>
4) <span class="hljs-string">&quot;xxdxx &quot;</span>
5) <span class="hljs-string">&quot;age &quot;</span>
6) <span class="hljs-string">&quot;22&quot;</span>
</code></pre>
<h3 id="t15Lists - &#x5217;&#x8868;">Lists - &#x5217;&#x8868; <a href="#t15Lists - &#x5217;&#x8868;"> # </a></h3>
<pre><code class="lang-bash">redis&gt; lpush pricess kenny
(<span class="hljs-built_in">integer</span>) 1
redis 127.0.0.1:6379&gt; lpush pricess jolin
(<span class="hljs-built_in">integer</span>) 2
redis 127.0.0.1:6379&gt; lpush pricess mayun
(<span class="hljs-built_in">integer</span>) 3
redis 127.0.0.1:6379&gt; lrange pricess 0 10
1) <span class="hljs-string">&quot;kenny&quot;</span>
2) <span class="hljs-string">&quot;jolin&quot;</span>
3) <span class="hljs-string">&quot;mayun&quot;</span>
</code></pre>
<h3 id="t16&#x6709;&#x5E8F;&#x96C6;&#x5408;">&#x6709;&#x5E8F;&#x96C6;&#x5408; <a href="#t16&#x6709;&#x5E8F;&#x96C6;&#x5408;"> # </a></h3>
<pre><code class="lang-bash">redis &gt; ZADD kindom 1 redis
(<span class="hljs-built_in">integer</span>) 1
redis&gt; ZADD kindom 2 mongodb
(<span class="hljs-built_in">integer</span>) 1
redis &gt; ZADD kindom 3 mysql
(<span class="hljs-built_in">integer</span>) 1
redis &gt; ZADD kindom 3 mysql
(<span class="hljs-built_in">integer</span>) 0
redis &gt; ZADD kindom 4 mysql
(<span class="hljs-built_in">integer</span>) 0
redis &gt; ZRANGE kindom 0 10 WITHSCORES
1) <span class="hljs-string">&quot;redis&quot;</span>
2) <span class="hljs-string">&quot;1&quot;</span>
3) <span class="hljs-string">&quot;mongodb&quot;</span>
4) <span class="hljs-string">&quot;2&quot;</span>
5) <span class="hljs-string">&quot;mysql&quot;</span>
6) <span class="hljs-string">&quot;4&quot;</span>
</code></pre>
<h2 id="t17&#x5F00;&#x542F;&#x901A;&#x77E5;">&#x5F00;&#x542F;&#x901A;&#x77E5; <a href="#t17&#x5F00;&#x542F;&#x901A;&#x77E5;"> # </a></h2>
<p>&#x952E;&#x7A7A;&#x95F4;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#x9ED8;&#x8BA4;&#x88AB;&#x7981;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x6D88;&#x8017;CPU&#x7535;&#x91CF;&#x4E0D;&#x662F;&#x5F88;&#x660E;&#x667A;&#x3002;&#x4F7F;&#x7528;<code>redis.conf</code>&#x7684;<code>notify-keyspace-events</code>&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;<code>CONFIG SET</code>&#x6765;&#x5F00;&#x542F;&#x901A;&#x77E5;&#x3002; </p>
<pre><code class="lang-bash"><span class="hljs-comment">## &#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x5F00;&#x542F;&#x901A;&#x77E5;&#x529F;&#x80FD;</span>
$ redis-cli config <span class="hljs-built_in">set</span> notify-keyspace-events KEA
<span class="hljs-comment">## &#x547D;&#x4EE4;&#x884C;&#x76D1;&#x63A7;&#x6240;&#x6709;&#x901A;&#x77E5;</span>
$ redis-cli --csv psubscribe <span class="hljs-string">&apos;__key*__:*&apos;</span>
Reading messages... (press Ctrl-C to quit)
<span class="hljs-string">&quot;psubscribe&quot;</span>,<span class="hljs-string">&quot;__key*__:*&quot;</span>,1
</code></pre>
<p>&#x952E;&#x503C;&#x8BF4;&#x660E;</p>
<pre><code class="lang-bash">K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.  
E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.  
g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...  
$     String commands  
l     List commands  
s     Set commands  
h     Hash commands  
z     Sorted <span class="hljs-built_in">set</span> commands  
x     Expired events (events generated every time a key expires)  
e     Evicted events (events generated when a key is evicted <span class="hljs-keyword">for</span> maxmemory)  
A     Alias <span class="hljs-keyword">for</span> g<span class="hljs-variable">$lshzxe</span>, so that the <span class="hljs-string">&quot;AKE&quot;</span> string means all the events. 
</code></pre>
<p>&#x4E0D;&#x540C;&#x547D;&#x4EE4;&#x4EA7;&#x751F;&#x7684;&#x4E8B;&#x4EF6;(Events generated by different commands) </p>
<p>&#x6309;&#x7167;&#x4E0B;&#x9762;&#x7684;&#x6E05;&#x5355;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x547D;&#x4EE4;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x4E8B;&#x4EF6;&#x3002; <a href="http://redis.io/topics/notifications">Redis Keyspace Notifications</a></p>
<ul>
<li>DEL &#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x88AB;&#x5220;&#x9664;&#x7684;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>RENAME &#x4EA7;&#x751F;&#x4E24;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E3A;&#x6E90;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;rename_from&#x4E8B;&#x4EF6;&#xFF0C;&#x4E3A;&#x76EE;&#x6807;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;rename_to&#x4E8B;&#x4EF6;&#x3002;</li>
<li>EXPIRE &#x5F53;&#x4E3A;&#x952E;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;expire&#x4E8B;&#x4EF6;&#xFF0C;&#x6216;&#x8005;&#x6BCF;&#x5F53;&#x8BBE;&#x7F6E;&#x4E86;&#x8FC7;&#x671F;&#x7684;&#x952E;&#x88AB;&#x5220;&#x9664;&#x65F6;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;expired&#x4E8B;&#x4EF6;(&#x67E5;&#x770B;EXPIRE&#x6587;&#x6863;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;)&#x3002;</li>
<li>SORT &#x5F53;STORE&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x65B0;&#x952E;&#x65F6;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;sortstore&#x4E8B;&#x4EF6;&#x3002;&#x5F53;&#x7ED3;&#x679C;&#x5217;&#x8868;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x4E86;STORE&#x9009;&#x9879;&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x4E2A;&#x8BE5;&#x540D;&#x5B57;&#x7684;&#x952E;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4EF6;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x79CD;&#x6761;&#x4EF6;&#x4E0B;&#x6216;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SET&#x53CA;&#x5176;&#x6240;&#x6709;&#x53D8;&#x79CD;(SETEX, SETNX,GETSET) &#x4EA7;&#x751F;set&#x4E8B;&#x4EF6;&#x3002;&#x4F46;&#x662F;SETEX&#x8FD8;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;expire&#x4E8B;&#x4EF6;&#x3002;</li>
<li>MSET &#x4E3A;&#x6BCF;&#x4E2A;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;set&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SETRANGE &#x4EA7;&#x751F;&#x4E00;&#x4E2A;setrange&#x4E8B;&#x4EF6;&#x3002;</li>
<li>INCR, DECR, INCRBY, DECRBY &#x90FD;&#x4EA7;&#x751F;incrby&#x4E8B;&#x4EF6;&#x3002;</li>
<li>INCRBYFLOAT &#x4EA7;&#x751F;&#x4E00;&#x4E2A;incrbyfloat&#x4E8B;&#x4EF6;&#x3002;</li>
<li>APPEND &#x4EA7;&#x751F;&#x4E00;&#x4E2A;append&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LPUSH&#x548C;LPUSHX &#x4EA7;&#x751F;&#x5355;&#x4E2A;lpush&#x4E8B;&#x4EF6;&#xFF0C;&#x5373;&#x4F7F;&#x5728;&#x53EF;&#x53D8;&#x60C5;&#x51B5;&#x4E0B;(even in the variadic case)&#x3002;</li>
<li>RPUSH&#x548C;RPUSHX &#x4EA7;&#x751F;&#x5355;&#x4E2A;rpush&#x4E8B;&#x4EF6;&#xFF0C;&#x5373;&#x4F7F;&#x5728;&#x53EF;&#x53D8;&#x60C5;&#x51B5;&#x4E0B;(even in the variadic case)&#x3002;</li>
<li>RPOP &#x4EA7;&#x751F;&#x4E00;&#x4E2A;rpop&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x952E;&#x7531;&#x4E8E;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x88AB;&#x4ECE;&#x5217;&#x8868;&#x4E2D;&#x5F39;&#x51FA;&#x800C;&#x5BFC;&#x81F4;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LPOP &#x4EA7;&#x751F;&#x4E00;&#x4E2A;lpop&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x952E;&#x7531;&#x4E8E;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x88AB;&#x4ECE;&#x5217;&#x8868;&#x4E2D;&#x5F39;&#x51FA;&#x800C;&#x5BFC;&#x81F4;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LINSERT &#x4EA7;&#x751F;&#x4E00;&#x4E2A;linsert&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LSET &#x4EA7;&#x751F;&#x4E00;&#x4E2A;lset&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LREM &#x4EA7;&#x751F;&#x4E00;&#x4E2A;lrem&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x5217;&#x8868;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>LTRIM &#x4EA7;&#x751F;&#x4E00;&#x4E2A;ltrim&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x5217;&#x8868;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>RPOPLPUSH&#x548C;BRPOPLPUSH &#x4EA7;&#x751F;&#x4E00;&#x4E2A;rpop&#x4E8B;&#x4EF6;&#x548C;&#x4E00;&#x4E2A;lpush&#x4E8B;&#x4EF6;&#x3002;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x987A;&#x5E8F;&#x90FD;&#x80FD;&#x4FDD;&#x8BC1; (lpush&#x4E8B;&#x4EF6;&#x603B;&#x662F;&#x5728;rpop&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x88AB;&#x4F20;&#x9012;) &#x5982;&#x679C;&#x7ED3;&#x679C;&#x5217;&#x8868;&#x957F;&#x5EA6;&#x4E3A;&#x96F6;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>HSET, HSETNX&#x548C;HMSET &#x90FD;&#x4EA7;&#x751F;&#x5355;&#x4E2A;hset&#x4E8B;&#x4EF6;&#x3002;</li>
<li>HINCRBY &#x4EA7;&#x751F;&#x4E00;&#x4E2A;hincrby&#x4E8B;&#x4EF6;&#x3002;</li>
<li>HINCRBYFLOAT &#x4EA7;&#x751F;&#x4E00;&#x4E2A;hincrbyfloat&#x4E8B;&#x4EF6;&#x3002;</li>
<li>HDEL &#x4EA7;&#x751F;&#x5355;&#x4E2A;hdel&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x54C8;&#x5E0C;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SADD &#x4EA7;&#x751F;&#x5355;&#x4E2A;sadd&#x4E8B;&#x4EF6;&#xFF0C;&#x5373;&#x4F7F;&#x5728;&#x53EF;&#x53D8;&#x60C5;&#x51B5;&#x4E0B;(even in the variadic case)&#x3002;</li>
<li>SREM &#x4EA7;&#x751F;&#x5355;&#x4E2A;srem&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SMOVE &#x4E3A;&#x6E90;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;srem&#x4E8B;&#x4EF6;&#x4E3A;&#x76EE;&#x6807;&#x952E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;sadd&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SPOP &#x4EA7;&#x751F;&#x4E00;&#x4E2A;spop&#x4E8B;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x53C8;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>SINTERSTORE, SUNIONSTORE, SDIFFSTORE &#x5206;&#x522B;&#x4EA7;&#x751F;sinterstore&#xFF0C;sunionostore&#xFF0C;sdiffstore&#x4E8B;&#x4EF6;&#x3002;&#x5728;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E14;&#x5B58;&#x50A8;&#x7ED3;&#x679C;&#x7684;&#x952E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x7531;&#x4E8E;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>ZINCR &#x4EA7;&#x751F;&#x4E00;&#x4E2A;zincr&#x4E8B;&#x4EF6;&#x3002;</li>
<li>ZADD&#x4EA7;&#x751F;&#x5355;&#x4E2A;zadd&#x4E8B;&#x4EF6;&#xFF0C;&#x5373;&#x4F7F;&#x6DFB;&#x52A0;&#x4E86;&#x591A;&#x4E2A;&#x5143;&#x7D20;&#x3002;.</li>
<li>ZREM &#x4EA7;&#x751F;&#x5355;&#x4E2A;zrem&#x4E8B;&#x4EF6;&#xFF0C;&#x5373;&#x4F7F;&#x5220;&#x9664;&#x4E86;&#x591A;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5F53;&#x7ED3;&#x679C;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x751F;&#x6210;&#x65F6;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>ZREMBYSCORE &#x4EA7;&#x751F;&#x5355;&#x4E2A;zrembyscore&#x4E8B;&#x4EF6;&#x3002;&#x5F53;&#x7ED3;&#x679C;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x751F;&#x6210;&#x65F6;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>ZREMBYRANK &#x4EA7;&#x751F;&#x5355;&#x4E2A;zrembyrank&#x4E8B;&#x4EF6;&#x3002;&#x5F53;&#x7ED3;&#x679C;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x4E14;&#x952E;&#x88AB;&#x751F;&#x6210;&#x65F6;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>ZINTERSTORE&#x548C;ZUNIONSTORE &#x5206;&#x522B;&#x4EA7;&#x751F;zinterstore&#x548C;zunionstore&#x4E8B;&#x4EF6;&#x3002;&#x5728;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x96C6;&#x5408;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E14;&#x5B58;&#x50A8;&#x7ED3;&#x679C;&#x7684;&#x952E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x7531;&#x4E8E;&#x952E;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;del&#x4E8B;&#x4EF6;&#x3002;</li>
<li>&#x6BCF;&#x5F53;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x6709;&#x751F;&#x5B58;&#x4E8B;&#x4EF6;&#x7684;&#x952E;&#x7531;&#x4E8E;&#x8FC7;&#x671F;&#x800C;&#x88AB;&#x4ECE;&#x6570;&#x636E;&#x96C6;&#x4E2D;&#x5220;&#x9664;&#x65F6;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;expired&#x4E8B;&#x4EF6;&#x3002;</li>
<li>&#x6BCF;&#x5F53;&#x4E00;&#x4E2A;&#x952E;&#x7531;&#x4E8E;maxmemory&#x7B56;&#x7565;&#x800C;&#x4ECE;&#x6570;&#x636E;&#x96C6;&#x4E2D;&#x88AB;&#x6DD8;&#x6C70;&#x4EE5;&#x8282;&#x7701;&#x5185;&#x5B58;&#x65F6;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;evicted&#x4E8B;&#x4EF6;&#x3002;</li>
</ul>
<h2 id="t18&#x5F00;&#x542F;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x8FDE;&#x63A5;">&#x5F00;&#x542F;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x8FDE;&#x63A5; <a href="#t18&#x5F00;&#x542F;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x8FDE;&#x63A5;"> # </a></h2>
<p>&#x4F7F;&#x7528; netstat &#x6765;&#x67E5;&#x770B;&#x7AEF;&#x53E3;&#x5360;&#x7528;&#x60C5;&#x51B5;&#xFF0C;6379&#x4E3A;&#x9ED8;&#x8BA4;Redis&#x7AEF;&#x53E3;&#x3002;</p>
<pre><code class="lang-bash">netstat -nlt|grep 6379
</code></pre>
<ul>
<li>-t&#xFF1A;&#x6307;&#x660E;&#x663E;&#x793A; TCP &#x7AEF;&#x53E3;</li>
<li>-u&#xFF1A;&#x6307;&#x660E;&#x663E;&#x793A; UDP &#x7AEF;&#x53E3;</li>
<li>-l&#xFF1A;&#x4EC5;&#x663E;&#x793A;&#x76D1;&#x542C;&#x5957;&#x63A5;&#x5B57;</li>
<li>-p&#xFF1A;&#x663E;&#x793A;&#x8FDB;&#x7A0B;&#x6807;&#x8BC6;&#x7B26;&#x548C;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x5957;&#x63A5;&#x5B57;/&#x7AEF;&#x53E3;&#x90FD;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x3002;</li>
<li>-n&#xFF1A;&#x4E0D;&#x8FDB;&#x884C; DNS &#x8F6E;&#x8BE2;&#xFF0C;&#x663E;&#x793A; IP &#xFF08;&#x53EF;&#x4EE5;&#x52A0;&#x901F;&#x64CD;&#x4F5C;&#xFF09;</li>
</ul>
<h3 id="t19&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;">&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E; <a href="#t19&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;"> # </a></h3>
<p>&#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E; sudo vi /etc/sysconfig/iptables</p>
<pre><code class="lang-bash">-A INPUT -m state --state NEW -m tcp -p tcp --dport 6379 -j ACCEPT
</code></pre>
<h3 id="t20&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <a href="#t20&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"> # </a></h3>
<p>Redis protected-mode &#x662F;3.2 &#x4E4B;&#x540E;&#x52A0;&#x5165;&#x7684;&#x65B0;&#x7279;&#x6027;&#xFF0C;&#x5728;Redis.conf&#x7684;&#x6CE8;&#x91CA;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;&#xFF0C;&#x4ED6;&#x7684;&#x5177;&#x4F53;&#x4F5C;&#x7528;&#x548C;&#x542F;&#x7528;&#x6761;&#x4EF6;&#x3002;&#x53EF;&#x4EE5;&#x5728; sudo vi /etc/redis.conf &#x4E2D;&#x7F16;&#x8F91;&#xFF0C;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Protected mode is a layer of security protection, in order to avoid that</span>
<span class="hljs-comment"># Redis instances left open on the internet are accessed and exploited.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When protected mode is on and if:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) The server is not binding explicitly to a set of addresses using the</span>
<span class="hljs-comment">#    &quot;bind&quot; directive.</span>
<span class="hljs-comment"># 2) No password is configured.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The server only accepts connections from clients connecting from the</span>
<span class="hljs-comment"># IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span>
<span class="hljs-comment"># sockets.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default protected mode is enabled. You should disable it only if</span>
<span class="hljs-comment"># you are sure you want clients from other hosts to connect to Redis</span>
<span class="hljs-comment"># even if no authentication is configured, nor a specific set of interfaces</span>
<span class="hljs-comment"># are explicitly listed using the &quot;bind&quot; directive.</span>
protected-mode yes

</code></pre>
<p>&#x5B83;&#x542F;&#x7528;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p>
<ol>
<li>&#x6CA1;&#x6709;bind IP</li>
<li>&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x8BBF;&#x95EE;&#x5BC6;&#x7801;</li>
</ol>
<p>&#x5982;&#x679C;&#x542F;&#x7528;&#x4E86;&#xFF0C;&#x5219;&#x53EA;&#x80FD;&#x591F;&#x901A;&#x8FC7;lookback ip&#xFF08;127.0.0.1&#xFF09;&#x8BBF;&#x95EE;Redis cache&#xFF0C;&#x5982;&#x679C;&#x4ECE;&#x5916;&#x7F51;&#x8BBF;&#x95EE;&#xFF0C;&#x5219;&#x4F1A;&#x8FD4;&#x56DE;&#x76F8;&#x5E94;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF1A;</p>
<pre><code class="lang-bash">(error) DENIED Redis is running <span class="hljs-keyword">in</span> protected mode because protected mode is enabled, no <span class="hljs-built_in">bind</span> address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the lookback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just <span class="hljs-built_in">disable</span> protected mode sending the <span class="hljs-built_in">command</span> <span class="hljs-string">&apos;CONFIG SET protected-mode no&apos;</span> from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet <span class="hljs-keyword">if</span> you <span class="hljs-keyword">do</span> so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just <span class="hljs-built_in">disable</span> the protected mode by editing the Redis configuration file, and setting the protected mode option to <span class="hljs-string">&apos;no&apos;</span>, and <span class="hljs-keyword">then</span> restarting the server. 3) If you started the server manually just <span class="hljs-keyword">for</span> testing, restart it with the --portected-mode no option. 4) Setup a <span class="hljs-built_in">bind</span> address or an authentication password. NOTE: You only need to <span class="hljs-keyword">do</span> one of the above things <span class="hljs-keyword">in</span> order <span class="hljs-keyword">for</span> the server to start accepting connections from the outside.
</code></pre>
<h2 id="t21&#x63D0;&#x4F9B;&#x7684;&#x539F;&#x751F;&#x76D1;&#x63A7;">&#x63D0;&#x4F9B;&#x7684;&#x539F;&#x751F;&#x76D1;&#x63A7; <a href="#t21&#x63D0;&#x4F9B;&#x7684;&#x539F;&#x751F;&#x76D1;&#x63A7;"> # </a></h2>
<h3 id="t22&#x5F53;&#x524D;&#x94FE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x548C;&#x8FDE;&#x63A5;&#x6570;">&#x5F53;&#x524D;&#x94FE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x548C;&#x8FDE;&#x63A5;&#x6570; <a href="#t22&#x5F53;&#x524D;&#x94FE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x548C;&#x8FDE;&#x63A5;&#x6570;"> # </a></h3>
<p><code>redis-cli --stat</code>&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FDE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#xFF0C;&#x8FDE;&#x63A5;&#x6570;&#x7B49;</p>
<pre><code class="lang-bash">------- data ------ --------------------- load -------------------- - child -
keys       mem      clients blocked requests            connections
4          1.27M    6       0       17340 (+0)          111
4          1.27M    6       0       17341 (+1)          111
4          1.27M    6       0       17342 (+1)          111
4          1.27M    6       0       17343 (+1)          111
</code></pre>
<h3 id="t23&#x5185;&#x5B58;&#x6700;&#x5927;&#x7684;&#x952E;&#x503C;&#x548C;&#x5E73;&#x5747;&#x7684;&#x952E;&#x503C;&#x6570;&#x636E;">&#x5185;&#x5B58;&#x6700;&#x5927;&#x7684;&#x952E;&#x503C;&#x548C;&#x5E73;&#x5747;&#x7684;&#x952E;&#x503C;&#x6570;&#x636E; <a href="#t23&#x5185;&#x5B58;&#x6700;&#x5927;&#x7684;&#x952E;&#x503C;&#x548C;&#x5E73;&#x5747;&#x7684;&#x952E;&#x503C;&#x6570;&#x636E;"> # </a></h3>
<p><code>redis-cli --bigkeys</code> &#x5BF9;&#x5F53;&#x524D;&#x5360;&#x7528;&#x5185;&#x5B58;&#x6700;&#x5927;&#x7684;&#x952E;&#x503C;&#x548C;&#x5E73;&#x5747;&#x7684;&#x952E;&#x503C;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6307;&#x5B9A;<code>-i</code>&#x53C2;&#x6570;&#x5B9A;&#x65F6;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;&#x89C6;&#x56FE;&#x60C5;&#x51B5;&#x3002;</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Scanning the entire keyspace to find biggest keys as well as</span>
<span class="hljs-comment"># average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec</span>
<span class="hljs-comment"># per 100 SCAN commands (not usually needed).</span>

[00.00%] Biggest string found so far <span class="hljs-string">&apos;asdf.js&apos;</span> with 3 bytes
[00.00%] Biggest string found so far <span class="hljs-string">&apos;wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE&apos;</span> with 328 bytes
[00.00%] Biggest string found so far <span class="hljs-string">&apos;wabg-token-province&apos;</span> with 231042 bytes

-------- summary -------

Sampled 4 keys <span class="hljs-keyword">in</span> the keyspace!
Total key length <span class="hljs-keyword">in</span> bytes is 180 (avg len 45.00)

Biggest string found <span class="hljs-string">&apos;wabg-token-province&apos;</span> has 231042 bytes

4 strings with 231819 bytes (100.00% of keys, avg size 57954.75)
0 lists with 0 items (00.00% of keys, avg size 0.00)
0 sets with 0 members (00.00% of keys, avg size 0.00)
0 hashs with 0 fields (00.00% of keys, avg size 0.00)
0 zsets with 0 members (00.00% of keys, avg size 0.00)
</code></pre>
<h3 id="t24&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;&#x952E;&#x503C;&#x60C5;&#x51B5;">&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;&#x952E;&#x503C;&#x60C5;&#x51B5; <a href="#t24&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;&#x952E;&#x503C;&#x60C5;&#x51B5;"> # </a></h3>
<p><code>redis-cli --scan</code>&#x63D0;&#x4F9B;&#x548C;<code>keys *</code>&#x76F8;&#x4F3C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;&#x952E;&#x503C;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6B63;&#x5219;&#x8868;&#x8FBE;</p>
<pre><code class="lang-bash">$ redis-cli --scan

sess:K4xh-bxOBrcXpy9kEW87oiy-u7I2sAA5
asdf.js
sess:1tGNZSXW8GyoEQsbtpqkA5tMmSFp_ZIn
wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE
sess:3e4NGIJd0wf1-RONeTt-FsXQj4EaVNjk
wabg-token-province
sess:UuCLAX2sWZ50fiIO1qvDgulf0XIZRd98
wabg-tokeneyJhbGciOiJIUzI1NiJ9.MQ.6z44GClzAsUED1M_UyxqdREdDKcYFnL9tSqd5ZhLhsY
sess:2HEchaRLYUoaa44IF1bB6mpik7lZjBb4
</code></pre>
<h3 id="t25&#x539F;&#x751F;&#x7684;Monitor&#x76D1;&#x63A7;">&#x539F;&#x751F;&#x7684;Monitor&#x76D1;&#x63A7; <a href="#t25&#x539F;&#x751F;&#x7684;Monitor&#x76D1;&#x63A7;"> # </a></h3>
<p>redis-cli monitor&#x6253;&#x5370;&#x51FA;&#x6240;&#x6709;sever&#x63A5;&#x6536;&#x5230;&#x7684;&#x547D;&#x4EE4;&#x4EE5;&#x53CA;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5730;&#x5740;</p>
<pre><code class="lang-bash">$ redis-cli monitor
OK
1472626566.218175 [0 127.0.0.1:62862] <span class="hljs-string">&quot;info&quot;</span>
1472626571.220948 [0 127.0.0.1:62862] <span class="hljs-string">&quot;exists&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span>
1472626571.223174 [0 127.0.0.1:62862] <span class="hljs-string">&quot;set&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span> <span class="hljs-string">&quot;&quot;</span>
1472626571.232126 [0 127.0.0.1:62862] <span class="hljs-string">&quot;type&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span>
1472626571.243697 [0 127.0.0.1:62862] <span class="hljs-string">&quot;pttl&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span>
1472626571.243717 [0 127.0.0.1:62862] <span class="hljs-string">&quot;object&quot;</span> <span class="hljs-string">&quot;ENCODING&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span>
1472626571.243726 [0 127.0.0.1:62862] <span class="hljs-string">&quot;strlen&quot;</span> <span class="hljs-string">&quot;aaa&quot;</span>
</code></pre>
<h2 id="t26&#x914D;&#x7F6E;&#x8BF4;&#x660E;">&#x914D;&#x7F6E;&#x8BF4;&#x660E; <a href="#t26&#x914D;&#x7F6E;&#x8BF4;&#x660E;"> # </a></h2>
<pre><code class="lang-bash"><span class="hljs-comment">#redis.conf</span>
<span class="hljs-comment"># Redis configuration file example.</span>
<span class="hljs-comment"># ./redis-server /path/to/redis.conf</span>

<span class="hljs-comment">################################## INCLUDES ###################################</span>
<span class="hljs-comment">#&#x8FD9;&#x5728;&#x4F60;&#x6709;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#x4F46;&#x662F;&#x6BCF;&#x4E2A;redis&#x670D;&#x52A1;&#x5668;&#x53C8;&#x9700;&#x8981;&#x4E2A;&#x6027;&#x8BBE;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x5F88;&#x6709;&#x7528;&#x3002;</span>
<span class="hljs-comment"># include /path/to/local.conf</span>
<span class="hljs-comment"># include /path/to/other.conf</span>

<span class="hljs-comment">################################ GENERAL #####################################</span>

<span class="hljs-comment"># &#x662F;&#x5426;&#x5728;&#x540E;&#x53F0;&#x6267;&#x884C;&#xFF0C;yes&#xFF1A;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF1B;no&#xFF1A;&#x4E0D;&#x662F;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF08;&#x8001;&#x7248;&#x672C;&#x9ED8;&#x8BA4;&#xFF09;</span>
daemonize yes

<span class="hljs-comment"># 3.2&#x91CC;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x662F;&#x5426;&#x5F00;&#x542F;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x3002;&#x8981;&#x662F;&#x914D;&#x7F6E;&#x91CC;&#x6CA1;&#x6709;&#x6307;&#x5B9A;bind&#x548C;&#x5BC6;&#x7801;&#x3002;</span>
<span class="hljs-comment"># &#x5F00;&#x542F;&#x8BE5;&#x53C2;&#x6570;&#x540E;&#xFF0C;redis&#x53EA;&#x4F1A;&#x672C;&#x5730;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#xFF0C;&#x62D2;&#x7EDD;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x3002;</span>
<span class="hljs-comment"># &#x8981;&#x662F;&#x5F00;&#x542F;&#x4E86;&#x5BC6;&#x7801;   &#x548C;bind&#xFF0C;&#x53EF;&#x4EE5;&#x5F00;&#x542F;&#x3002;&#x5426;   &#x5219;&#x6700;&#x597D;&#x5173;&#x95ED;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;no&#x3002;</span>

protected-mode yes
<span class="hljs-comment"># redis&#x7684;&#x8FDB;&#x7A0B;&#x6587;&#x4EF6;</span>
pidfile /var/run/redis/redis-server.pid

<span class="hljs-comment"># redis&#x76D1;&#x542C;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x3002;</span>
port 6379

<span class="hljs-comment"># &#x6B64;&#x53C2;&#x6570;&#x786E;&#x5B9A;&#x4E86;TCP&#x8FDE;&#x63A5;&#x4E2D;&#x5DF2;&#x5B8C;&#x6210;&#x961F;&#x5217;(&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x4E4B;&#x540E;)&#x7684;&#x957F;&#x5EA6;&#xFF0C; </span>
<span class="hljs-comment"># &#x5F53;&#x7136;&#x6B64;&#x503C;&#x5FC5;&#x987B;&#x4E0D;&#x5927;&#x4E8E;Linux&#x7CFB;&#x7EDF;&#x5B9A;&#x4E49;&#x7684;/proc/sys/net/core/somaxconn&#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;511&#xFF0C;</span>
<span class="hljs-comment"># &#x800C;Linux&#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x503C;&#x662F;128&#x3002;&#x5F53;&#x7CFB;&#x7EDF;&#x5E76;&#x53D1;&#x91CF;&#x5927;&#x5E76;&#x4E14;&#x5BA2;&#x6237;&#x7AEF;&#x901F;&#x5EA6;&#x7F13;&#x6162;&#x7684;&#x65F6;&#x5019;&#xFF0C;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E00;&#x8D77;&#x53C2;&#x8003;&#x8BBE;&#x5B9A;&#x3002;&#x8BE5;&#x5185;&#x6838;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x503C;&#x4E00;&#x822C;&#x662F;128&#xFF0C;&#x5BF9;&#x4E8E;&#x8D1F;&#x8F7D;&#x5F88;&#x5927;&#x7684;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#x5927;&#x5927;&#x7684;&#x4E0D;&#x591F;&#x3002;</span>
<span class="hljs-comment"># &#x4E00;&#x822C;&#x4F1A;&#x5C06;&#x5B83;&#x4FEE;&#x6539;&#x4E3A;2048&#x6216;&#x8005;&#x66F4;&#x5927;&#x3002;&#x5728;/etc/sysctl.conf&#x4E2D;&#x6DFB;&#x52A0;:net.core.somaxconn = 2048&#xFF0C;&#x7136;&#x540E;&#x5728;&#x7EC8;&#x7AEF;&#x4E2D;&#x6267;&#x884C;sysctl -p&#x3002;</span>
tcp-backlog 511

<span class="hljs-comment">#&#x6307;&#x5B9A; redis &#x53EA;&#x63A5;&#x6536;&#x6765;&#x81EA;&#x4E8E;&#x8BE5; IP &#x5730;&#x5740;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x5904;&#x7406;&#x6240;&#x6709;&#x8BF7;&#x6C42;</span>
<span class="hljs-built_in">bind</span> 127.0.0.1

<span class="hljs-comment"># &#x914D;&#x7F6E;unix socket&#x6765;&#x8BA9;redis&#x652F;&#x6301;&#x76D1;&#x542C;&#x672C;&#x5730;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment"># unixsocket /var/run/redis/redis.sock</span>
<span class="hljs-comment"># &#x914D;&#x7F6E;unix socket&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;</span>
<span class="hljs-comment"># unixsocketperm 700</span>

<span class="hljs-comment"># &#x6B64;&#x53C2;&#x6570;&#x4E3A;&#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x7A7A;&#x95F2;&#x8D85;&#x8FC7;timeout&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x4F1A;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x4E3A;0&#x5219;&#x670D;&#x52A1;&#x7AEF;&#x4E0D;&#x4F1A;&#x4E3B;&#x52A8;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x4E0D;&#x80FD;&#x5C0F;&#x4E8E;0&#x3002;</span>
timeout 0

<span class="hljs-comment"># tcp keepalive&#x53C2;&#x6570;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E0D;&#x4E3A;0&#xFF0C;&#x5C31;&#x4F7F;&#x7528;&#x914D;&#x7F6E;tcp&#x7684;SO_KEEPALIVE&#x503C;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F7F;&#x7528;keepalive&#x6709;&#x4E24;&#x4E2A;&#x597D;&#x5904;:&#x68C0;&#x6D4B;&#x6302;&#x6389;&#x7684;&#x5BF9;&#x7AEF;&#x3002;&#x964D;&#x4F4E;&#x4E2D;&#x95F4;&#x8BBE;&#x5907;&#x51FA;&#x95EE;&#x9898;&#x800C;&#x5BFC;&#x81F4;&#x7F51;&#x7EDC;&#x770B;&#x4F3C;&#x8FDE;&#x63A5;&#x5374;&#x5DF2;&#x7ECF;&#x4E0E;&#x5BF9;&#x7AEF;&#x7AEF;&#x53E3;&#x7684;&#x95EE;&#x9898;&#x3002;</span>
<span class="hljs-comment"># &#x5728;Linux&#x5185;&#x6838;&#x4E2D;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;keepalive&#xFF0C;redis&#x4F1A;&#x5B9A;&#x65F6;&#x7ED9;&#x5BF9;&#x7AEF;&#x53D1;&#x9001;ack&#x3002;&#x68C0;&#x6D4B;&#x5230;&#x5BF9;&#x7AEF;&#x5173;&#x95ED;&#x9700;&#x8981;&#x4E24;&#x500D;&#x7684;&#x8BBE;&#x7F6E;&#x503C;&#x3002;</span>
tcp-keepalive 0

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x4E86;&#x670D;&#x52A1;&#x7AEF;&#x65E5;&#x5FD7;&#x7684;&#x7EA7;&#x522B;&#x3002;&#x7EA7;&#x522B;&#x5305;&#x62EC;&#xFF1A;debug&#xFF08;&#x5F88;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#xFF09;&#xFF0C;</span>
<span class="hljs-comment"># verbose&#xFF08;&#x8BB8;&#x591A;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;debug&#x7EA7;&#x522B;&#x4FE1;&#x606F;&#x591A;&#xFF09;&#xFF0C;notice&#xFF08;&#x9002;&#x5F53;&#x7684;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x9002;&#x5408;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#xFF09;&#xFF0C;warn&#xFF08;&#x53EA;&#x6709;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4FE1;&#x606F;&#xFF09;</span>
loglevel notice

<span class="hljs-comment">#&#x6307;&#x5B9A;&#x4E86;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x8BDD;&#xFF0C;&#x65E5;&#x5FD7;&#x4F1A;&#x6253;&#x5370;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x3002;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684;redis&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x662F;/dev/null&#x3002;</span>
logfile /var/<span class="hljs-built_in">log</span>/redis/redis-server.log

<span class="hljs-comment"># &#x662F;&#x5426;&#x6253;&#x5F00;&#x8BB0;&#x5F55;syslog&#x529F;&#x80FD;</span>
<span class="hljs-comment"># syslog-enabled no</span>

<span class="hljs-comment"># syslog&#x7684;&#x6807;&#x8BC6;&#x7B26;&#x3002;</span>
<span class="hljs-comment"># syslog-ident redis</span>

<span class="hljs-comment"># &#x65E5;&#x5FD7;&#x7684;&#x6765;&#x6E90;&#x3001;&#x8BBE;&#x5907;</span>
<span class="hljs-comment"># syslog-facility local0</span>

<span class="hljs-comment"># &#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x662F;DB 0&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201D;SELECT &#x201C;&#x547D;&#x4EE4;&#x9009;&#x62E9;&#x4E00;&#x4E2A;db</span>
databases 16

<span class="hljs-comment">################################ SNAPSHOTTING ################################</span>
<span class="hljs-comment"># &#x5FEB;&#x7167;&#x914D;&#x7F6E;</span>
<span class="hljs-comment"># &#x6CE8;&#x91CA;&#x6389;&#x201C;save&#x201D;&#x8FD9;&#x4E00;&#x884C;&#x914D;&#x7F6E;&#x9879;&#x5C31;&#x53EF;&#x4EE5;&#x8BA9;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x529F;&#x80FD;&#x5931;&#x6548;</span>
<span class="hljs-comment"># &#x8BBE;&#x7F6E;sedis&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x955C;&#x50CF;&#x7684;&#x9891;&#x7387;&#x3002;</span>
<span class="hljs-comment"># 900&#x79D2;&#xFF08;15&#x5206;&#x949F;&#xFF09;&#x5185;&#x81F3;&#x5C11;1&#x4E2A;key&#x503C;&#x6539;&#x53D8;&#xFF08;&#x5219;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x4FDD;&#x5B58;--&#x6301;&#x4E45;&#x5316;&#xFF09; </span>
<span class="hljs-comment"># 300&#x79D2;&#xFF08;5&#x5206;&#x949F;&#xFF09;&#x5185;&#x81F3;&#x5C11;10&#x4E2A;key&#x503C;&#x6539;&#x53D8;&#xFF08;&#x5219;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x4FDD;&#x5B58;--&#x6301;&#x4E45;&#x5316;&#xFF09; </span>
<span class="hljs-comment"># 60&#x79D2;&#xFF08;1&#x5206;&#x949F;&#xFF09;&#x5185;&#x81F3;&#x5C11;10000&#x4E2A;key&#x503C;&#x6539;&#x53D8;&#xFF08;&#x5219;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x4FDD;&#x5B58;--&#x6301;&#x4E45;&#x5316;&#xFF09;</span>
save 900 1
save 300 10
save 60 10000

<span class="hljs-comment"># &#x5F53;RDB&#x6301;&#x4E45;&#x5316;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x540E;&#xFF0C;&#x662F;&#x5426;&#x4F9D;&#x7136;&#x8FDB;&#x884C;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#xFF0C;yes&#xFF1A;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#xFF0C;no&#xFF1A;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#xFF0C;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7;info&#x4E2D;&#x7684;rdb_last_bgsave_status&#x4E86;&#x89E3;RDB&#x6301;&#x4E45;&#x5316;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;</span>
stop-writes-on-bgsave-error yes

<span class="hljs-comment"># &#x4F7F;&#x7528;&#x538B;&#x7F29;rdb&#x6587;&#x4EF6;&#xFF0C;rdb&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4F7F;&#x7528;LZF&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#xFF0C;yes&#xFF1A;&#x538B;&#x7F29;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x4E00;&#x4E9B;cpu&#x7684;&#x6D88;&#x8017;&#x3002;no&#xFF1A;&#x4E0D;&#x538B;&#x7F29;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;</span>
rdbcompression yes

<span class="hljs-comment"># &#x662F;&#x5426;&#x6821;&#x9A8C;rdb&#x6587;&#x4EF6;&#x3002;&#x4ECE;rdb&#x683C;&#x5F0F;&#x7684;&#x7B2C;&#x4E94;&#x4E2A;&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x5728;rdb&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;&#x4F1A;&#x5E26;&#x4E0A;CRC64&#x7684;&#x6821;&#x9A8C;&#x548C;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x8DDF;&#x6709;&#x5229;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x5BB9;&#x9519;&#x6027;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4FDD;&#x5B58;rdb&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x6709;&#x5927;&#x6982;10%&#x7684;&#x6027;&#x80FD;&#x635F;&#x8017;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x8FFD;&#x6C42;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8BE5;&#x914D;&#x7F6E;&#x3002;</span>
rdbchecksum yes

<span class="hljs-comment"># rdb&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;</span>
dbfilename dump.rdb

<span class="hljs-comment"># &#x6570;&#x636E;&#x76EE;&#x5F55;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5199;&#x5165;&#x4F1A;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x3002;rdb&#x3001;aof&#x6587;&#x4EF6;&#x4E5F;&#x4F1A;&#x5199;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;</span>
dir /var/lib/redis

<span class="hljs-comment">################################# REPLICATION #################################</span>
<span class="hljs-comment"># &#x590D;&#x5236;&#x9009;&#x9879;&#xFF0C;slave&#x590D;&#x5236;&#x5BF9;&#x5E94;&#x7684;master&#x3002;</span>
<span class="hljs-comment"># slaveof &lt;masterip&gt; &lt;masterport&gt;</span>

<span class="hljs-comment">#&#x5982;&#x679C;master&#x8BBE;&#x7F6E;&#x4E86;requirepass&#xFF0C;&#x90A3;&#x4E48;slave&#x8981;&#x8FDE;&#x4E0A;master&#xFF0C;&#x9700;&#x8981;&#x6709;master&#x7684;&#x5BC6;&#x7801;&#x624D;&#x884C;&#x3002;masterauth&#x5C31;&#x662F;&#x7528;&#x6765;&#x914D;&#x7F6E;master&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5728;&#x8FDE;&#x4E0A;master&#x540E;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#x3002;</span>
<span class="hljs-comment"># masterauth &lt;master-password&gt;</span>

<span class="hljs-comment">#&#x5F53;&#x4ECE;&#x5E93;&#x540C;&#x4E3B;&#x673A;&#x5931;&#x53BB;&#x8FDE;&#x63A5;&#x6216;&#x8005;&#x590D;&#x5236;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#xFF0C;&#x4ECE;&#x673A;&#x5E93;&#x6709;&#x4E24;&#x79CD;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF1A;1) &#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;yes(&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;)&#xFF0C;&#x4ECE;&#x5E93;&#x4F1A;&#x7EE7;&#x7EED;&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x3002;2) &#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;&#x9664;&#x53BB;INFO&#x548C;SLAVOF&#x547D;&#x4EE4;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x4F55;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x201D;SYNC with master in progress&#x201D;&#x3002;</span>
slave-serve-stale-data yes

<span class="hljs-comment">#&#x4F5C;&#x4E3A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF08;yes&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6210;NO&#xFF0C;&#x7528;&#x4E8E;&#x5199;&#xFF08;&#x4E0D;&#x5EFA;&#x8BAE;&#xFF09;&#x3002;</span>
slave-read-only yes

<span class="hljs-comment">#&#x662F;&#x5426;&#x4F7F;&#x7528;socket&#x65B9;&#x5F0F;&#x590D;&#x5236;&#x6570;&#x636E;&#x3002;&#x76EE;&#x524D;redis&#x590D;&#x5236;&#x63D0;&#x4F9B;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;disk&#x548C;socket&#x3002;&#x5982;&#x679C;&#x65B0;&#x7684;slave&#x8FDE;&#x4E0A;&#x6765;&#x6216;&#x8005;&#x91CD;&#x8FDE;&#x7684;slave&#x65E0;&#x6CD5;&#x90E8;&#x5206;&#x540C;&#x6B65;&#xFF0C;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x5168;&#x91CF;&#x540C;&#x6B65;&#xFF0C;master&#x4F1A;&#x751F;&#x6210;rdb&#x6587;&#x4EF6;&#x3002;&#x6709;2&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;disk&#x65B9;&#x5F0F;&#x662F;master&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x628A;rdb&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x518D;&#x628A;&#x78C1;&#x76D8;&#x4E0A;&#x7684;rdb&#x6587;&#x4EF6;&#x4F20;&#x9012;&#x7ED9;slave&#x3002;socket&#x662F;master&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x76F4;&#x63A5;&#x628A;rdb&#x6587;&#x4EF6;&#x4EE5;socket&#x7684;&#x65B9;&#x5F0F;&#x53D1;&#x7ED9;slave&#x3002;disk&#x65B9;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;rdb&#x4FDD;&#x5B58;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x591A;&#x4E2A;slave&#x90FD;&#x80FD;&#x5171;&#x4EAB;&#x8FD9;&#x4E2A;rdb&#x6587;&#x4EF6;&#x3002;socket&#x7684;&#x65B9;&#x5F0F;&#x5C31;&#x7684;&#x4E00;&#x4E2A;&#x4E2A;slave&#x987A;&#x5E8F;&#x590D;&#x5236;&#x3002;&#x5728;&#x78C1;&#x76D8;&#x901F;&#x5EA6;&#x7F13;&#x6162;&#xFF0C;&#x7F51;&#x901F;&#x5FEB;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x63A8;&#x8350;&#x7528;socket&#x65B9;&#x5F0F;&#x3002;</span>
repl-diskless-sync no

<span class="hljs-comment">#diskless&#x590D;&#x5236;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#xFF0C;&#x9632;&#x6B62;&#x8BBE;&#x7F6E;&#x4E3A;0&#x3002;&#x4E00;&#x65E6;&#x590D;&#x5236;&#x5F00;&#x59CB;&#xFF0C;&#x8282;&#x70B9;&#x4E0D;&#x4F1A;&#x518D;&#x63A5;&#x6536;&#x65B0;slave&#x7684;&#x590D;&#x5236;&#x8BF7;&#x6C42;&#x76F4;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;rdb&#x4F20;&#x8F93;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x597D;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x7B49;&#x66F4;&#x591A;&#x7684;slave&#x8FDE;&#x4E0A;&#x6765;&#x3002;</span>
repl-diskless-sync-delay 5

<span class="hljs-comment">#slave&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;ping&#x8BF7;&#x6C42;&#x3002;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; repl_ping_slave_period &#x6765;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;10&#x79D2;&#x3002;</span>
<span class="hljs-comment"># repl-ping-slave-period 10</span>

<span class="hljs-comment">#&#x590D;&#x5236;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;master&#x548C;slave&#x90FD;&#x6709;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x7684;&#x8BBE;&#x7F6E;&#x3002;master&#x68C0;&#x6D4B;&#x5230;slave&#x4E0A;&#x6B21;&#x53D1;&#x9001;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;repl-timeout&#xFF0C;&#x5373;&#x8BA4;&#x4E3A;slave&#x79BB;&#x7EBF;&#xFF0C;&#x6E05;&#x9664;&#x8BE5;slave&#x4FE1;&#x606F;&#x3002;slave&#x68C0;&#x6D4B;&#x5230;&#x4E0A;&#x6B21;&#x548C;master&#x4EA4;&#x4E92;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;repl-timeout&#xFF0C;&#x5219;&#x8BA4;&#x4E3A;master&#x79BB;&#x7EBF;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;repl-timeout&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6BD4;repl-ping-slave-period&#x66F4;&#x5927;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x7136;&#x4F1A;&#x7ECF;&#x5E38;&#x68C0;&#x6D4B;&#x5230;&#x8D85;&#x65F6;&#x3002;</span>
<span class="hljs-comment"># repl-timeout 60</span>

<span class="hljs-comment">#&#x662F;&#x5426;&#x7981;&#x6B62;&#x590D;&#x5236;tcp&#x94FE;&#x63A5;&#x7684;tcp nodelay&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4F20;&#x9012;yes&#x6216;&#x8005;no&#x3002;&#x9ED8;&#x8BA4;&#x662F;no&#xFF0C;&#x5373;&#x4F7F;&#x7528;tcp nodelay&#x3002;&#x5982;&#x679C;master&#x8BBE;&#x7F6E;&#x4E86;yes&#x6765;&#x7981;&#x6B62;tcp nodelay&#x8BBE;&#x7F6E;&#xFF0C;&#x5728;&#x628A;&#x6570;&#x636E;&#x590D;&#x5236;&#x7ED9;slave&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x51CF;&#x5C11;&#x5305;&#x7684;&#x6570;&#x91CF;&#x548C;&#x66F4;&#x5C0F;&#x7684;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E5F;&#x53EF;&#x80FD;&#x5E26;&#x6765;&#x6570;&#x636E;&#x7684;&#x5EF6;&#x8FDF;&#x3002;&#x9ED8;&#x8BA4;&#x6211;&#x4EEC;&#x63A8;&#x8350;&#x66F4;&#x5C0F;&#x7684;&#x5EF6;&#x8FDF;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x6570;&#x636E;&#x91CF;&#x4F20;&#x8F93;&#x5F88;&#x5927;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5EFA;&#x8BAE;&#x9009;&#x62E9;yes&#x3002;</span>
repl-disable-tcp-nodelay no

<span class="hljs-comment">#&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x73AF;&#x5F62;&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x6700;&#x65B0;&#x590D;&#x5236;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x6837;&#x5728;slave&#x79BB;&#x7EBF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x590D;&#x5236;master&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x90E8;&#x5206;&#x540C;&#x6B65;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x628A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x90E8;&#x5206;&#x6570;&#x636E;&#x590D;&#x5236;&#x7ED9;slave&#xFF0C;&#x5C31;&#x80FD;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x590D;&#x5236;&#x72B6;&#x6001;&#x3002;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#x8D8A;&#x5927;&#xFF0C;slave&#x79BB;&#x7EBF;&#x7684;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x66F4;&#x957F;&#xFF0C;&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#x53EA;&#x6709;&#x5728;&#x6709;slave&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x624D;&#x5206;&#x914D;&#x5185;&#x5B58;&#x3002;&#x6CA1;&#x6709;slave&#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x5185;&#x5B58;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#x51FA;&#x6765;&#xFF0C;&#x9ED8;&#x8BA4;1m&#x3002;</span>
<span class="hljs-comment"># repl-backlog-size 5mb</span>

<span class="hljs-comment">#master&#x6CA1;&#x6709;slave&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4F1A;&#x91CA;&#x653E;&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5185;&#x5B58;&#xFF0C;repl-backlog-ttl&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x8BE5;&#x65F6;&#x95F4;&#x957F;&#x5EA6;&#x3002;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;&#x3002;</span>
<span class="hljs-comment"># repl-backlog-ttl 3600</span>

<span class="hljs-comment">#&#x5F53;master&#x4E0D;&#x53EF;&#x7528;&#xFF0C;Sentinel&#x4F1A;&#x6839;&#x636E;slave&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x9009;&#x4E3E;&#x4E00;&#x4E2A;master&#x3002;&#x6700;&#x4F4E;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x7684;slave&#xFF0C;&#x5F53;&#x9009;master&#x3002;&#x800C;&#x914D;&#x7F6E;&#x6210;0&#xFF0C;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x88AB;&#x9009;&#x4E3E;&#x3002;</span>
slave-priority 100

<span class="hljs-comment">#redis&#x63D0;&#x4F9B;&#x4E86;&#x53EF;&#x4EE5;&#x8BA9;master&#x505C;&#x6B62;&#x5199;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x4E86;min-slaves-to-write&#xFF0C;&#x5065;&#x5EB7;&#x7684;slave&#x7684;&#x4E2A;&#x6570;&#x5C0F;&#x4E8E;N&#xFF0C;mater&#x5C31;&#x7981;&#x6B62;&#x5199;&#x5165;&#x3002;master&#x6700;&#x5C11;&#x5F97;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x5065;&#x5EB7;&#x7684;slave&#x5B58;&#x6D3B;&#x624D;&#x80FD;&#x6267;&#x884C;&#x5199;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x867D;&#x7136;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;N&#x4E2A;slave&#x90FD;&#x4E00;&#x5B9A;&#x80FD;&#x63A5;&#x6536;&#x5230;master&#x7684;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x80FD;&#x907F;&#x514D;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x5065;&#x5EB7;&#x7684;slave&#x7684;&#x65F6;&#x5019;&#xFF0C;master&#x4E0D;&#x80FD;&#x5199;&#x5165;&#x6765;&#x907F;&#x514D;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;&#x8BBE;&#x7F6E;&#x4E3A;0&#x662F;&#x5173;&#x95ED;&#x8BE5;&#x529F;&#x80FD;&#x3002;</span>
<span class="hljs-comment"># min-slaves-to-write 3</span>

<span class="hljs-comment">#&#x5EF6;&#x8FDF;&#x5C0F;&#x4E8E;min-slaves-max-lag&#x79D2;&#x7684;slave&#x624D;&#x8BA4;&#x4E3A;&#x662F;&#x5065;&#x5EB7;&#x7684;slave&#x3002;</span>
<span class="hljs-comment"># min-slaves-max-lag 10</span>

<span class="hljs-comment"># &#x8BBE;&#x7F6E;1&#x6216;&#x53E6;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E3A;0&#x7981;&#x7528;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x3002;</span>
<span class="hljs-comment"># Setting one or the other to 0 disables the feature.</span>
<span class="hljs-comment"># By default min-slaves-to-write is set to 0 (feature disabled) and</span>
<span class="hljs-comment"># min-slaves-max-lag is set to 10.</span>

<span class="hljs-comment">################################## SECURITY ###################################</span>
<span class="hljs-comment">#requirepass&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x8BA9;&#x7528;&#x6237;&#x4F7F;&#x7528;AUTH&#x547D;&#x4EE4;&#x6765;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;&#xFF0C;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x8BA9;redis&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;&#x7684;&#x7F51;&#x7EDC;&#x4E2D;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x5411;&#x540E;&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;&#x8BE5;&#x547D;&#x4EE4;&#xFF0C;&#x56E0;&#x4E3A;&#x5927;&#x90E8;&#x5206;&#x7528;&#x6237;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x8BA4;&#x8BC1;&#x3002;&#x4F7F;&#x7528;requirepass&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;redis&#x592A;&#x5FEB;&#x4E86;&#xFF0C;&#x6BCF;&#x79D2;&#x53EF;&#x4EE5;&#x8BA4;&#x8BC1;15w&#x6B21;&#x5BC6;&#x7801;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x5BC6;&#x7801;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x653B;&#x7834;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x597D;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x66F4;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&#x3002;</span>
<span class="hljs-comment"># requirepass foobared</span>

<span class="hljs-comment">#&#x628A;&#x5371;&#x9669;&#x7684;&#x547D;&#x4EE4;&#x7ED9;&#x4FEE;&#x6539;&#x6210;&#x5176;&#x4ED6;&#x540D;&#x79F0;&#x3002;&#x6BD4;&#x5982;CONFIG&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x91CD;&#x547D;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x5F88;&#x96BE;&#x88AB;&#x731C;&#x5230;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x5185;&#x90E8;&#x5DE5;&#x5177;&#x8FD8;&#x80FD;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x3002;</span>
<span class="hljs-comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>

<span class="hljs-comment">#&#x8BBE;&#x7F6E;&#x6210;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x7981;&#x6B62;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;</span>
<span class="hljs-comment"># rename-command CONFIG &quot;&quot;</span>
<span class="hljs-comment">################################### LIMITS ####################################</span>

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x80FD;&#x8FDE;&#x4E0A;redis&#x7684;&#x6700;&#x5927;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#x3002;&#x9ED8;&#x8BA4;&#x662F;10000&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment"># &#x7531;&#x4E8E;redis&#x4E0D;&#x533A;&#x5206;&#x8FDE;&#x63A5;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x8FD8;&#x662F;&#x5185;&#x90E8;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x548C;slave&#x8FDE;&#x63A5;&#x7B49;&#xFF0C;&#x6240;&#x4EE5;maxclients&#x6700;&#x5C0F;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5230;32&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86;maxclients&#xFF0C;redis&#x4F1A;&#x7ED9;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x53D1;&#x9001;&#x2019;max number of clients reached&#x2019;&#xFF0C;&#x5E76;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment"># maxclients 10000</span>

<span class="hljs-comment"># redis&#x914D;&#x7F6E;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x3002;&#x5F53;&#x5185;&#x5B58;&#x6EE1;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x5408;maxmemory-policy&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;slave&#x7684;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x662F;&#x4E0D;&#x8BA1;&#x7B97;&#x5728;maxmemory&#x5185;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x4E3B;&#x673A;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5B8C;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x7684;maxmemory&#x9700;&#x8981;&#x66F4;&#x5C0F;&#x4E00;&#x4E9B;&#x3002;</span>
<span class="hljs-comment"># maxmemory &lt;bytes&gt;</span>

<span class="hljs-comment"># &#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x8D85;&#x8FC7;maxmemory&#x540E;&#x7684;&#x5904;&#x7406;&#x7B56;&#x7565;&#x3002;</span>
<span class="hljs-comment"># volatile-lru&#xFF1A;&#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x3002;</span>
<span class="hljs-comment"># volatile-random&#xFF1A;&#x968F;&#x673A;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x3002;</span>
<span class="hljs-comment"># volatile-ttl&#xFF1A;&#x79FB;&#x9664;&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x7684;key&#xFF0C;&#x6839;&#x636E;&#x6700;&#x8FD1;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x6765;&#x5220;&#x9664;&#xFF08;&#x8F85;&#x4EE5;TTL&#xFF09;</span>
<span class="hljs-comment"># allkeys-lru&#xFF1A;&#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#x3002;</span>
<span class="hljs-comment"># allkeys-random&#xFF1A;&#x968F;&#x673A;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#x3002;</span>
<span class="hljs-comment"># noeviction&#xFF1A;&#x4E0D;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5199;&#x9519;&#x8BEF;&#x3002;</span>
<span class="hljs-comment"># &#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x9A71;&#x9010;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#x679C;redis&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;key&#x9A71;&#x9010;&#xFF0C;&#x5BF9;&#x4E8E;&#x5199;&#x547D;&#x4EE4;&#xFF0C;&#x8FD8;&#x662F;&#x4F1A;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x3002;</span>
<span class="hljs-comment"># redis&#x5C06;&#x4E0D;&#x518D;&#x63A5;&#x6536;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x53EA;&#x63A5;&#x6536;get&#x8BF7;&#x6C42;&#x3002;</span>
<span class="hljs-comment"># &#x5199;&#x547D;&#x4EE4;&#x5305;&#x62EC;&#xFF1A;set setnx setex append incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby getset mset msetnx exec sort&#x3002;</span>
<span class="hljs-comment"># maxmemory-policy noeviction</span>

<span class="hljs-comment">#lru&#x68C0;&#x6D4B;&#x7684;&#x6837;&#x672C;&#x6570;&#x3002;&#x4F7F;&#x7528;lru&#x6216;&#x8005;ttl&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF0C;&#x4ECE;&#x9700;&#x8981;&#x6DD8;&#x6C70;&#x7684;&#x5217;&#x8868;&#x4E2D;&#x968F;&#x673A;&#x9009;&#x62E9;sample&#x4E2A;key&#xFF0C;&#x9009;&#x51FA;&#x95F2;&#x7F6E;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;key&#x79FB;&#x9664;&#x3002;</span>
<span class="hljs-comment"># maxmemory-samples 5</span>

<span class="hljs-comment">############################## APPEND ONLY MODE ###############################</span>
<span class="hljs-comment">#&#x9ED8;&#x8BA4;redis&#x4F7F;&#x7528;&#x7684;&#x662F;rdb&#x65B9;&#x5F0F;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5728;&#x8BB8;&#x591A;&#x5E94;&#x7528;&#x4E2D;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x7528;&#x4E86;&#x3002;&#x4F46;&#x662F;redis&#x5982;&#x679C;&#x4E2D;&#x9014;&#x5B95;&#x673A;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x53EF;&#x80FD;&#x6709;&#x51E0;&#x5206;&#x949F;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x6839;&#x636E;save&#x6765;&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;Append Only File&#x662F;&#x53E6;&#x4E00;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x66F4;&#x597D;&#x7684;&#x6301;&#x4E45;&#x5316;&#x7279;&#x6027;&#x3002;Redis&#x4F1A;&#x628A;&#x6BCF;&#x6B21;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x5728;&#x63A5;&#x6536;&#x540E;&#x90FD;&#x5199;&#x5165; appendonly.aof &#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x6B21;&#x542F;&#x52A8;&#x65F6;Redis&#x90FD;&#x4F1A;&#x5148;&#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#x91CC;&#xFF0C;&#x5148;&#x5FFD;&#x7565;RDB&#x6587;&#x4EF6;&#x3002;</span>
appendonly no

<span class="hljs-comment">#aof&#x6587;&#x4EF6;&#x540D;</span>
appendfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span>

<span class="hljs-comment"># aof&#x6301;&#x4E45;&#x5316;&#x7B56;&#x7565;&#x7684;&#x914D;&#x7F6E;</span>
<span class="hljs-comment"># no&#x8868;&#x793A;&#x4E0D;&#x6267;&#x884C;fsync&#xFF0C;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x901F;&#x5EA6;&#x6700;&#x5FEB;&#x3002;</span>
<span class="hljs-comment"># always&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x5199;&#x5165;&#x90FD;&#x6267;&#x884C;fsync&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x78C1;&#x76D8;&#x3002;</span>
<span class="hljs-comment"># everysec&#x8868;&#x793A;&#x6BCF;&#x79D2;&#x6267;&#x884C;&#x4E00;&#x6B21;fsync&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E22;&#x5931;&#x8FD9;1s&#x6570;&#x636E;&#x3002;</span>
appendfsync everysec

<span class="hljs-comment"># &#x5728;aof&#x91CD;&#x5199;&#x6216;&#x8005;&#x5199;&#x5165;rdb&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5927;&#x91CF;IO&#xFF0C;</span>
<span class="hljs-comment"># &#x6B64;&#x65F6;&#x5BF9;&#x4E8E;everysec&#x548C;always&#x7684;aof&#x6A21;&#x5F0F;&#x6765;&#x8BF4;&#xFF0C;&#x6267;&#x884C;fsync&#x4F1A;&#x9020;&#x6210;&#x963B;&#x585E;&#x8FC7;&#x957F;&#x65F6;&#x95F4;&#xFF0C;</span>
<span class="hljs-comment"># no-appendfsync-on-rewrite&#x5B57;&#x6BB5;&#x8BBE;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E3A;no&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x5BF9;&#x5EF6;&#x8FDF;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x5426;&#x5219;&#x8FD8;&#x662F;&#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;</span>
<span class="hljs-comment"># &#x8FD9;&#x6837;&#x5BF9;&#x6301;&#x4E45;&#x5316;&#x7279;&#x6027;&#x6765;&#x8BF4;&#x8FD9;&#x662F;&#x66F4;&#x5B89;&#x5168;&#x7684;&#x9009;&#x62E9;&#x3002;&#x8BBE;&#x7F6E;&#x4E3A;yes&#x8868;&#x793A;rewrite&#x671F;&#x95F4;&#x5BF9;&#x65B0;&#x5199;&#x64CD;&#x4F5C;&#x4E0D;fsync,</span>
<span class="hljs-comment"># &#x6682;&#x65F6;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;,&#x7B49;rewrite&#x5B8C;&#x6210;&#x540E;&#x518D;&#x5199;&#x5165;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;no&#xFF0C;&#x5EFA;&#x8BAE;yes&#x3002;Linux&#x7684;&#x9ED8;&#x8BA4;fsync&#x7B56;&#x7565;&#x662F;30&#x79D2;&#x3002;&#x53EF;&#x80FD;&#x4E22;&#x5931;30&#x79D2;&#x6570;&#x636E;&#x3002;</span>
no-appendfsync-on-rewrite no

<span class="hljs-comment"># aof&#x81EA;&#x52A8;&#x91CD;&#x5199;&#x914D;&#x7F6E;&#x3002;&#x5F53;&#x76EE;&#x524D;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x4E0A;&#x4E00;&#x6B21;&#x91CD;&#x5199;&#x7684;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x7684;&#x767E;&#x5206;&#x4E4B;&#x591A;&#x5C11;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#xFF0C;</span>
<span class="hljs-comment"># &#x5373;&#x5F53;aof&#x6587;&#x4EF6;&#x589E;&#x957F;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;Redis&#x80FD;&#x591F;&#x8C03;&#x7528;bgrewriteaof&#x5BF9;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x524D;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x662F;&#x4E0A;&#x6B21;&#x65E5;&#x5FD7;&#x91CD;&#x5199;&#x5F97;&#x5230;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x7684;&#x4E8C;&#x500D;&#xFF08;&#x8BBE;&#x7F6E;&#x4E3A;100&#xFF09;&#x65F6;&#xFF0C;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x65B0;&#x7684;&#x65E5;&#x5FD7;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;&#x3002;</span>
auto-aof-rewrite-percentage 100
<span class="hljs-comment">#&#x8BBE;&#x7F6E;&#x5141;&#x8BB8;&#x91CD;&#x5199;&#x7684;&#x6700;&#x5C0F;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x8FBE;&#x5230;&#x7EA6;&#x5B9A;&#x767E;&#x5206;&#x6BD4;&#x4F46;&#x5C3A;&#x5BF8;&#x4ECD;&#x7136;&#x5F88;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x8FD8;&#x8981;&#x91CD;&#x5199;</span>
auto-aof-rewrite-min-size 64mb

<span class="hljs-comment"># aof&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x5728;&#x5C3E;&#x90E8;&#x662F;&#x4E0D;&#x5B8C;&#x6574;&#x7684;&#xFF0C;&#x5F53;redis&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;aof&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x88AB;&#x8F7D;&#x5165;&#x5185;&#x5B58;&#x3002;</span>
<span class="hljs-comment"># &#x91CD;&#x542F;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x5728;redis&#x6240;&#x5728;&#x7684;&#x4E3B;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5B95;&#x673A;&#x540E;&#xFF0C;</span>
<span class="hljs-comment"># &#x5C24;&#x5176;&#x5728;ext4&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x52A0;&#x4E0A;data=ordered&#x9009;&#x9879;&#xFF08;redis&#x5B95;&#x673A;&#x6216;&#x8005;&#x5F02;&#x5E38;&#x7EC8;&#x6B62;&#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x5C3E;&#x90E8;&#x4E0D;&#x5B8C;&#x6574;&#x73B0;&#x8C61;&#x3002;&#xFF09;</span>
<span class="hljs-comment"># &#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x8BA9;redis&#x9000;&#x51FA;&#xFF0C;&#x6216;&#x8005;&#x5BFC;&#x5165;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;&#x5982;&#x679C;&#x9009;&#x62E9;&#x7684;&#x662F;yes&#xFF0C;</span>
<span class="hljs-comment"># &#x5F53;&#x622A;&#x65AD;&#x7684;aof&#x6587;&#x4EF6;&#x88AB;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;log&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7136;&#x540E;load&#x3002;&#x5982;&#x679C;&#x662F;no&#xFF0C;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x624B;&#x52A8;redis-check-aof&#x4FEE;&#x590D;AOF&#x6587;&#x4EF6;&#x624D;&#x53EF;&#x4EE5;&#x3002;</span>
aof-load-truncated yes

<span class="hljs-comment">################################ LUA SCRIPTING ###############################</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x65F6;&#x95F4;&#x9650;&#x5236;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;&#xFF0C;redis&#x4F1A;&#x8BB0;&#x4E2A;log&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;error&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x8D85;&#x8FC7;&#x4E86;&#x6700;&#x5927;&#x65F6;&#x9650;&#x3002;</span>
<span class="hljs-comment"># &#x53EA;&#x6709;SCRIPT KILL&#x548C;SHUTDOWN NOSAVE&#x53EF;&#x4EE5;&#x7528;&#x3002;</span>
<span class="hljs-comment"># &#x7B2C;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x6740;&#x6CA1;&#x6709;&#x8C03;write&#x547D;&#x4EE4;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x8981;&#x662F;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;write&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x7B2C;&#x4E8C;&#x4E2A;&#x547D;&#x4EE4;&#x6740;&#x3002;</span>
lua-time-limit 5000

<span class="hljs-comment">################################ REDIS CLUSTER ###############################</span>
<span class="hljs-comment"># &#x96C6;&#x7FA4;&#x5F00;&#x5173;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x5F00;&#x542F;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;&#x3002;</span>
<span class="hljs-comment"># cluster-enabled yes</span>

<span class="hljs-comment"># &#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6301;&#x4E45;&#x5316;&#x4FDD;&#x5B58;&#x96C6;&#x7FA4;&#x7684;&#x4FE1;&#x606F;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6709;Redis&#x751F;&#x6210;&#x5E76;&#x66F4;&#x65B0;&#xFF0C;&#x6BCF;&#x4E2A;Redis&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;</span>
<span class="hljs-comment"># &#x8BF7;&#x786E;&#x4FDD;&#x4E0E;&#x5B9E;&#x4F8B;&#x8FD0;&#x884C;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x4E0D;&#x51B2;&#x7A81;</span>
<span class="hljs-comment"># cluster-config-file nodes-6379.conf</span>

<span class="hljs-comment"># &#x8282;&#x70B9;&#x4E92;&#x8FDE;&#x8D85;&#x65F6;&#x7684;&#x9600;&#x503C;&#x3002;&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x8D85;&#x65F6;&#x6BEB;&#x79D2;&#x6570;</span>
<span class="hljs-comment"># cluster-node-timeout 15000</span>

<span class="hljs-comment"># &#x5728;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5168;&#x90E8;slave&#x90FD;&#x4F1A;&#x8BF7;&#x6C42;&#x7533;&#x8BF7;&#x4E3A;master&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;slave&#x53EF;&#x80FD;&#x4E0E;master&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;</span>
<span class="hljs-comment"># &#x5BFC;&#x81F4;&#x6570;&#x636E;&#x8FC7;&#x4E8E;&#x9648;&#x65E7;&#xFF0C;&#x8FD9;&#x6837;&#x7684;slave&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x63D0;&#x5347;&#x4E3A;master&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x7528;&#x6765;&#x5224;&#x65AD;slave&#x8282;&#x70B9;&#x4E0E;master&#x65AD;&#x7EBF;&#x7684;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x8FC7;&#x957F;&#x3002;&#x5224;&#x65AD;&#x65B9;&#x6CD5;&#x662F;&#xFF1A;</span>
<span class="hljs-comment"># &#x6BD4;&#x8F83;slave&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x95F4;&#x548C;(node-timeout * slave-validity-factor) + repl-ping-slave-period</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8282;&#x70B9;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4E3A;&#x4E09;&#x5341;&#x79D2;, &#x5E76;&#x4E14;slave-validity-factor&#x4E3A;10,&#x5047;&#x8BBE;&#x9ED8;&#x8BA4;&#x7684;repl-ping-slave-period&#x662F;10&#x79D2;&#xFF0C;</span>
<span class="hljs-comment"># &#x5373;&#x5982;&#x679C;&#x8D85;&#x8FC7;310&#x79D2;slave&#x5C06;&#x4E0D;&#x4F1A;&#x5C1D;&#x8BD5;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB; </span>
<span class="hljs-comment"># cluster-slave-validity-factor 10</span>

<span class="hljs-comment"># master&#x7684;slave&#x6570;&#x91CF;&#x5927;&#x4E8E;&#x8BE5;&#x503C;&#xFF0C;slave&#x624D;&#x80FD;&#x8FC1;&#x79FB;&#x5230;&#x5176;&#x4ED6;&#x5B64;&#x7ACB;master&#x4E0A;&#xFF0C;</span>
<span class="hljs-comment"># &#x5982;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x82E5;&#x88AB;&#x8BBE;&#x4E3A;2&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x6709;&#x5F53;&#x4E00;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x62E5;&#x6709;2 &#x4E2A;&#x53EF;&#x5DE5;&#x4F5C;&#x7684;&#x4ECE;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x4F1A;&#x5C1D;&#x8BD5;&#x8FC1;&#x79FB;&#x3002;</span>
<span class="hljs-comment"># cluster-migration-barrier 1</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x96C6;&#x7FA4;&#x5168;&#x90E8;&#x7684;slot&#x6709;&#x8282;&#x70B9;&#x8D1F;&#x8D23;&#xFF0C;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x624D;&#x4E3A;ok&#xFF0C;&#x624D;&#x80FD;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</span>
<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;&#x53EF;&#x4EE5;&#x5728;slot&#x6CA1;&#x6709;&#x5168;&#x90E8;&#x5206;&#x914D;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</span>
<span class="hljs-comment"># &#x4E0D;&#x5EFA;&#x8BAE;&#x6253;&#x5F00;&#x8BE5;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;&#x5206;&#x533A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C0F;&#x5206;&#x533A;&#x7684;master&#x4E00;&#x76F4;&#x5728;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x9020;&#x6210;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</span>
<span class="hljs-comment"># cluster-require-full-coverage yes</span>

<span class="hljs-comment">################################## SLOW LOG ###################################</span>
<span class="hljs-comment">###slog log&#x662F;&#x7528;&#x6765;&#x8BB0;&#x5F55;redis&#x8FD0;&#x884C;&#x4E2D;&#x6267;&#x884C;&#x6BD4;&#x8F83;&#x6162;&#x7684;&#x547D;&#x4EE4;&#x8017;&#x65F6;&#x3002;&#x5F53;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x8D85;&#x8FC7;&#x4E86;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#xFF0C;&#x5C31;&#x8BB0;&#x5F55;&#x5728;slow log&#x4E2D;&#xFF0C;slog log&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;IO&#x64CD;&#x4F5C;&#x3002;</span>
<span class="hljs-comment">#&#x6267;&#x884C;&#x65F6;&#x95F4;&#x6BD4;slowlog-log-slower-than&#x5927;&#x7684;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;&#x5230;slowlog&#x91CC;&#x9762;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x5FAE;&#x79D2;&#xFF0C;&#x6240;&#x4EE5;1000000&#x5C31;&#x662F;1&#x79D2;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x8D1F;&#x6570;&#x65F6;&#x95F4;&#x4F1A;&#x7981;&#x7528;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;&#x800C;0&#x5219;&#x4F1A;&#x5F3A;&#x5236;&#x8BB0;&#x5F55;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x3002;</span>
slowlog-log-slower-than 10000

<span class="hljs-comment">#&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x957F;&#x5EA6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#x88AB;&#x5199;&#x8FDB;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6700;&#x8001;&#x7684;&#x90A3;&#x4E2A;&#x8BB0;&#x5F55;&#x4F1A;&#x88AB;&#x5220;&#x6389;&#x3002;&#x8FD9;&#x4E2A;&#x957F;&#x5EA6;&#x6CA1;&#x6709;&#x9650;&#x5236;&#x3002;&#x53EA;&#x8981;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5185;&#x5B58;&#x5C31;&#x884C;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; SLOWLOG RESET &#x6765;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</span>
slowlog-max-len 128

<span class="hljs-comment">################################ LATENCY MONITOR ##############################</span>
<span class="hljs-comment">#&#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x529F;&#x80FD;&#x662F;&#x7528;&#x6765;&#x76D1;&#x63A7;redis&#x4E2D;&#x6267;&#x884C;&#x6BD4;&#x8F83;&#x7F13;&#x6162;&#x7684;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x7528;LATENCY&#x6253;&#x5370;redis&#x5B9E;&#x4F8B;&#x5728;&#x8DD1;&#x547D;&#x4EE4;&#x65F6;&#x7684;&#x8017;&#x65F6;&#x56FE;&#x8868;&#x3002;&#x53EA;&#x8BB0;&#x5F55;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x4E0B;&#x8FB9;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x7684;&#x64CD;&#x4F5C;&#x3002;0&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x662F;&#x5173;&#x95ED;&#x76D1;&#x89C6;&#x3002;&#x9ED8;&#x8BA4;&#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x529F;&#x80FD;&#x662F;&#x5173;&#x95ED;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x6253;&#x5F00;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;CONFIG SET&#x547D;&#x4EE4;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x3002;</span>
latency-monitor-threshold 0

<span class="hljs-comment">############################# EVENT NOTIFICATION ##############################</span>
<span class="hljs-comment">#&#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#x4F7F;&#x5F97;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BA2;&#x9605;&#x9891;&#x9053;&#x6216;&#x6A21;&#x5F0F;&#xFF0C;&#x6765;&#x63A5;&#x6536;&#x90A3;&#x4E9B;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x6539;&#x52A8;&#x4E86; Redis &#x6570;&#x636E;&#x96C6;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x56E0;&#x4E3A;&#x5F00;&#x542F;&#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#x529F;&#x80FD;&#x9700;&#x8981;&#x6D88;&#x8017;&#x4E00;&#x4E9B; CPU &#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4E0B;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5904;&#x4E8E;&#x5173;&#x95ED;&#x72B6;&#x6001;&#x3002;</span>
<span class="hljs-comment">#notify-keyspace-events &#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EE5;&#x4E0B;&#x5B57;&#x7B26;&#x7684;&#x4EFB;&#x610F;&#x7EC4;&#x5408;&#xFF0C;&#x5B83;&#x6307;&#x5B9A;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x8BE5;&#x53D1;&#x9001;&#x54EA;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x901A;&#x77E5;&#xFF1A;</span>
<span class="hljs-comment">##K &#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x901A;&#x77E5;&#x4EE5; __keyspace@__ &#x4E3A;&#x524D;&#x7F00;</span>
<span class="hljs-comment">##E &#x952E;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x901A;&#x77E5;&#x4EE5; __keyevent@__ &#x4E3A;&#x524D;&#x7F00;</span>
<span class="hljs-comment">##g DEL &#x3001; EXPIRE &#x3001; RENAME &#x7B49;&#x7C7B;&#x578B;&#x65E0;&#x5173;&#x7684;&#x901A;&#x7528;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##$ &#x5B57;&#x7B26;&#x4E32;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##l &#x5217;&#x8868;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##s &#x96C6;&#x5408;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##h &#x54C8;&#x5E0C;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##z &#x6709;&#x5E8F;&#x96C6;&#x5408;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">##x &#x8FC7;&#x671F;&#x4E8B;&#x4EF6;&#xFF1A;&#x6BCF;&#x5F53;&#x6709;&#x8FC7;&#x671F;&#x952E;&#x88AB;&#x5220;&#x9664;&#x65F6;&#x53D1;&#x9001;</span>
<span class="hljs-comment">##e &#x9A71;&#x9010;(evict)&#x4E8B;&#x4EF6;&#xFF1A;&#x6BCF;&#x5F53;&#x6709;&#x952E;&#x56E0;&#x4E3A; maxmemory &#x653F;&#x7B56;&#x800C;&#x88AB;&#x5220;&#x9664;&#x65F6;&#x53D1;&#x9001;</span>
<span class="hljs-comment">##A &#x53C2;&#x6570; g$lshzxe &#x7684;&#x522B;&#x540D;</span>
<span class="hljs-comment">#&#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E2D;&#x81F3;&#x5C11;&#x8981;&#x6709;&#x4E00;&#x4E2A; K &#x6216;&#x8005; E&#xFF0C;&#x5426;&#x5219;&#x7684;&#x8BDD;&#xFF0C;&#x4E0D;&#x7BA1;&#x5176;&#x4F59;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x90FD;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55; &#x901A;&#x77E5;&#x88AB;&#x5206;&#x53D1;&#x3002;&#x8BE6;&#x7EC6;&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x53C2;&#x8003;http://redis.io/topics/notifications</span>

notify-keyspace-events <span class="hljs-string">&quot;KEA&quot;</span>

<span class="hljs-comment">############################### ADVANCED CONFIG ###############################</span>
<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;hash-max-ziplist-entries&#x7684;&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;hash-max-ziplist-entries&#x7528;hash</span>
<span class="hljs-built_in">hash</span>-max-ziplist-entries 512
<span class="hljs-comment"># value&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;hash-max-ziplist-value&#x7684;&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;hash-max-ziplist-value&#x7528;hash&#x3002;</span>
<span class="hljs-built_in">hash</span>-max-ziplist-value 64

<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;list-max-ziplist-entries&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;list-max-ziplist-entries&#x7528;list&#x3002;</span>
list-max-ziplist-entries 512
<span class="hljs-comment"># value&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;list-max-ziplist-value&#x7684;&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;list-max-ziplist-value&#x7528;list&#x3002;</span>
list-max-ziplist-value 64

<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;set-max-intset-entries&#x7528;iniset&#xFF0C;&#x5927;&#x4E8E;set-max-intset-entries&#x7528;set&#x3002;</span>
<span class="hljs-built_in">set</span>-max-intset-entries 512

<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;zset-max-ziplist-entries&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;zset-max-ziplist-entries&#x7528;zset&#x3002;</span>
zset-max-ziplist-entries 128
<span class="hljs-comment"># value&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;zset-max-ziplist-value&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;zset-max-ziplist-value&#x7528;zset&#x3002;</span>
zset-max-ziplist-value 64

<span class="hljs-comment"># value&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;hll-sparse-max-bytes&#x4F7F;&#x7528;&#x7A00;&#x758F;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;sparse&#xFF09;&#xFF0C;</span>
<span class="hljs-comment"># &#x5927;&#x4E8E;hll-sparse-max-bytes&#x4F7F;&#x7528;&#x7A20;&#x5BC6;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;dense&#xFF09;&#x3002;</span>
<span class="hljs-comment"># &#x4E00;&#x4E2A;&#x6BD4;16000&#x5927;&#x7684;value&#x662F;&#x51E0;&#x4E4E;&#x6CA1;&#x7528;&#x7684;&#xFF0C;&#x5EFA;&#x8BAE;&#x7684;value&#x5927;&#x6982;&#x4E3A;3000&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x5BF9;CPU&#x8981;&#x6C42;&#x4E0D;&#x9AD8;&#xFF0C;&#x5BF9;&#x7A7A;&#x95F4;&#x8981;&#x6C42;&#x8F83;&#x9AD8;&#x7684;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5230;10000&#x5DE6;&#x53F3;&#x3002;</span>
hll-sparse-max-bytes 3000

<span class="hljs-comment"># Redis&#x5C06;&#x5728;&#x6BCF;100&#x6BEB;&#x79D2;&#x65F6;&#x4F7F;&#x7528;1&#x6BEB;&#x79D2;&#x7684;CPU&#x65F6;&#x95F4;&#x6765;&#x5BF9;redis&#x7684;hash&#x8868;&#x8FDB;&#x884C;&#x91CD;&#x65B0;hash&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x4F60;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6709;&#x975E;&#x5E38;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x9700;&#x8981;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x63A5;&#x53D7;Redis&#x65F6;&#x4E0D;&#x65F6;&#x7684;&#x5BF9;&#x8BF7;&#x6C42;&#x6709;2&#x6BEB;&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x7684;&#x8BDD;&#xFF0C;&#x628A;&#x8FD9;&#x9879;&#x914D;&#x7F6E;&#x4E3A;no&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x7684;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</span>
activerehashing yes

<span class="hljs-comment"># &#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x8FDB;&#x884C;&#x9650;&#x5236;&#x53EF;&#x4EE5;&#x5F3A;&#x8FEB;&#x90A3;&#x4E9B;&#x4E0D;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x7528;&#x6765;&#x5F3A;&#x5236;&#x5173;&#x95ED;&#x4F20;&#x8F93;&#x7F13;&#x6162;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span>
<span class="hljs-comment"># &#x5BF9;&#x4E8E;normal client&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;0&#x8868;&#x793A;&#x53D6;&#x6D88;hard limit&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;0&#x548C;&#x7B2C;&#x4E09;&#x4E2A;0&#x8868;&#x793A;&#x53D6;&#x6D88;soft limit&#xFF0C;normal client&#x9ED8;&#x8BA4;&#x53D6;&#x6D88;&#x9650;&#x5236;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5BFB;&#x95EE;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x4E0D;&#x4F1A;&#x63A5;&#x6536;&#x6570;&#x636E;&#x7684;&#x3002;</span>
client-output-buffer-limit normal 0 0 0
<span class="hljs-comment"># &#x5BF9;&#x4E8E;slave client&#x548C;MONITER client&#xFF0C;&#x5982;&#x679C;client-output-buffer&#x4E00;&#x65E6;&#x8D85;&#x8FC7;256mb&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x8D85;&#x8FC7;64mb&#x6301;&#x7EED;60&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x65AD;&#x5F00;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
client-output-buffer-limit slave 256mb 64mb 60
<span class="hljs-comment"># &#x5BF9;&#x4E8E;pubsub client&#xFF0C;&#x5982;&#x679C;client-output-buffer&#x4E00;&#x65E6;&#x8D85;&#x8FC7;32mb&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x8D85;&#x8FC7;8mb&#x6301;&#x7EED;60&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x65AD;&#x5F00;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
client-output-buffer-limit pubsub 32mb 8mb 60

<span class="hljs-comment"># redis&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x9891;&#x7387;&#x4E3A;1s&#x9664;&#x4EE5;hz&#x3002;</span>
hz 10

<span class="hljs-comment"># &#x5728;aof&#x91CD;&#x5199;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x6253;&#x5F00;&#x4E86;aof-rewrite-incremental-fsync&#x5F00;&#x5173;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x6BCF;32MB&#x6267;&#x884C;&#x4E00;&#x6B21;fsync&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x628A;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x662F;&#x6709;&#x5E2E;&#x52A9;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8FC7;&#x5927;&#x7684;&#x5EF6;&#x8FDF;&#x5CF0;&#x503C;&#x3002;</span>
aof-rewrite-incremental-fsync yes
</code></pre>
<h2 id="t27&#x7CBE;&#x54C1;&#x6587;&#x7AE0;">&#x7CBE;&#x54C1;&#x6587;&#x7AE0; <a href="#t27&#x7CBE;&#x54C1;&#x6587;&#x7AE0;"> # </a></h2>
<ul>
<li><a href="http://blog.huangz.me/diary/2016/redis-4-outline.html">Redis 4.0 &#x65B0;&#x529F;&#x80FD;&#x7B80;&#x4ECB;</a></li>
<li><a href="http://blog.huangz.me/diary/2016/how-to-learn-redis.html">Redis &#x5B66;&#x4E60;&#x8DEF;&#x7EBF;</a></li>
<li><a href="https://mp.weixin.qq.com/s/TBCEwLVAXdsTszRVpXhVug">Redis&#x67B6;&#x6784;&#x4E4B;&#x9632;&#x96EA;&#x5D29;&#x8BBE;&#x8BA1;&#xFF1A;&#x7F51;&#x7AD9;&#x4E0D;&#x5B95;&#x673A;&#x80CC;&#x540E;&#x7684;&#x5175;&#x6CD5;</a></li>
<li><a href="https://cachecloud.github.io/2017/02/16/Redis%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">Redis&#x7684;&#x5185;&#x5B58;&#x4F18;&#x5316;</a></li>
<li><a href="https://zhuoroger.github.io/2016/08/20/redis-monitor-and-alarm/">&#x7EC6;&#x8BF4;Redis&#x76D1;&#x63A7;&#x548C;&#x544A;&#x8B66;</a></li>
<li><a href="https://github.com/sohutv/cachecloud">&#x641C;&#x72D0;&#x89C6;&#x9891;(sohu tv)Redis&#x79C1;&#x6709;&#x4E91;&#x5E73;&#x53F0;</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzA5NzkxMzg1Nw==&amp;mid=2653159795&amp;idx=1&amp;sn=10264108e1da670774b4b53a1e6dbbe4&amp;scene=0">&#x4F18;&#x9177;&#x571F;&#x8C46;&#x7684;Redis&#x670D;&#x52A1;&#x5E73;&#x53F0;&#x5316;&#x4E4B;&#x8DEF;</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzA3MzYwNjQ3NA==&amp;mid=2651296671&amp;idx=1&amp;sn=366de50a6787963517ff6e096c9d1643&amp;scene=2&amp;srcid=0601j5sEtcRyw9TtehhXW0Ix&amp;from=timeline&amp;isappinstalled=0#wechat_redirect">&#x8FD9;&#x53EF;&#x80FD;&#x662F;&#x6700;&#x5168;&#x7684; Redis &#x96C6;&#x7FA4;&#x65B9;&#x6848;&#x4ECB;&#x7ECD;&#x4E86;</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNTg2MDUyMw==&amp;mid=2247483661&amp;idx=1&amp;sn=c924b3a2b098c4211b0044de180a1c0e">&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#x7684;redis&#x96C6;&#x7FA4;</a></li>
</ul>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>


</body>
</html>
